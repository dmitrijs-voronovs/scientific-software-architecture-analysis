quality_attribute,sentence,source,author,repo,version,id,keyword,matched_word,match_idx,wiki,url,total_similar,target_keywords,target_matched_words
Availability," in a single field. ##### Upgrading. You are no longer tied to the previous preset combinations of health checks. However if you just want to carry forward; the exact same set of health checks, you can use one of the following standard recipes:. ###### From default, or `NoopHealthMonitorActor`:; If you're currently using the (default) NoopHealthMonitorActor, no action is required. ###### From `StandardHealthMonitorServiceActor`:; If you're currently using the `StandardHealthMonitorServiceActor`, replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.standard.StandardHealthMonitorServiceActor""; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; }; }; }; ``` ; ###### From `WorkbenchHealthMonitorServiceActor`:; Replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.workbench.WorkbenchHealthMonitorServiceActor"". config {; papi-backend-name = PAPIv1; papi-v2-backend-name = PAPIv2. google-auth-name = service-account; gcs-bucket-to-check = ""cromwell-ping-me-bucket""; }; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; check-gcs: true; check-papi-backends: [PAPIv1, PAPIv2]. google-auth-name = service-account; gcs-bucket-to-check = ""cromwell-ping-me-bucket""; }; }; }; ``` . ### Bug fixes. #### WDL 1.0 strings can contain escaped quotes. For example, the statement `String s = ""\""""` is now supported, whereas previously it produced a syntax error. #### Empty call blocks in WDL 1.0. Cromwell's WDL 1.0 implementation now allows empty call blocks, e.g. `call task_with_no_inputs {}`. This brings 1.0 in line with draft-2, which has always supported this syntax. #### Packed CWL bugfix. Fixed a bug that caused an error like `Custom type was referred to but not found` to be issued when using an imported type as a `SchemaDefRequirement` in packed CWL.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/40:1767,ping,ping-me-bucket,1767,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/40,4,"['error', 'ping']","['error', 'ping-me-bucket']"
Availability," to strings using; [the default Java formatter](https://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html#toString--) which; generates a variety of ISO-8601 formats. String conversions also retained whatever server time zone generated that; specific time instance. Going forward, times stored in Cromwell metadata, and later returned via the HTTP endpoint, are now converted to UTC; then formatted with exactly three digits of milliseconds. For example:; - `2017-01-19T12:34:56-04:00` will now be formatted as; - `2017-01-19T16:34:56.000Z`. This change only affects newly formatted dates. Older dates already formatted and stored by previous versions of; Cromwell will not be updated however they will still return a; [valid ISO-8601 format](https://en.wikipedia.org/wiki/ISO_8601). The older format may be in various non-UTC time zones,; and may or may not include microseconds or even nanoseconds, for example `2017-01-19T12:34:56.123456789-04:00`. ### Config Changes. #### Heartbeat failure shutdown. When a Cromwell instance is unable to write heartbeats for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:1524,failure,failure,1524,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,1,['failure'],['failure']
Availability,"## 43 Release Notes. ### Virtual Private Cloud with Subnetworks. Cromwell now allows PAPIV2 jobs to run on a specific subnetwork inside a private network by adding the subnetwork key ; `subnetwork-label-key` inside `virtual-private-cloud` in backend configuration. More info [here](https://cromwell.readthedocs.io/en/stable/backends/Google/). ### Call caching database refactoring. Cromwell's `CALL_CACHING_HASH_ENTRY` primary key has been refactored to use a `BIGINT` datatype in place of the previous; `INT` datatype. Cromwell will not be usable during the time the Liquibase migration for this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 100,000 `CALL_CACHING_HASH_ENTRY`; rows per second. In deployments with millions or billions of `CALL_CACHING_HASH_ENTRY` rows the migration may require ; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [doc",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:890,downtime,downtime,890,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['downtime'],['downtime']
Availability,"## 49 Release Notes. ### Changes and Warnings. #### Job store database refactoring. The primary keys of Cromwell's job store tables have been refactored to use a `BIGINT` datatype in place of the previous; `INT` datatype. Cromwell will not be usable during the time the Liquibase migration for this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 40,000 `JOB_STORE_SIMPLETON_ENTRY`; rows per second. In deployments with millions or billions of `JOB_STORE_SIMPLETON_ENTRY` rows the migration may require; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; SELECT table_rows FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'cromwell' AND table_name = 'JOB_STORE_SIMPLETON_ENTRY';; ```. #### Execution Directory Layout (cache copies). When an attempt to copy a cache result is made, you'll now see a `cacheCopy` directory in the call root directory. ; This prevents them clashing with the files staged to the same directory for attempt 1 if the cache copy fails (see also: Bug Fixes). The directory layout used to be:. ```; [...]/callRoot/; - script [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - stdout [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - output.file [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. but is now:. ```; [...]/callRoot/; - cacheCopy/; - script; - stdout; - output.file; - script [for attempt 1 if the cache copy fails]; - stdout [for attempt 1 if the cache copy fails]; - output.file [for attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. ### New Functionality. #### Disable call-caching for tasks. It is now possible to indicate in a workflow that a task should not ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:594,downtime,downtime,594,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,1,['downtime'],['downtime']
Availability,"//cromwell.readthedocs.io/en/stable/optimizations/VolatileTasks). #### Delete Intermediate Outputs on PapiV2. * **Experimental:** When a new workflow option `delete_intermediate_output_files` is submitted with the workflow,; intermediate `File` objects will be deleted when the workflow completes. See the [Google Pipelines API Workflow Options; documentation](https://cromwell.readthedocs.io/en/stable/wf_options/Google#google-pipelines-api-workflow-options); for more information. #### Metadata Archival Support. Cromwell 49 now offers the option to archive metadata to GCS and remove the equivalent metadata from relational; database storage. Please see ; [the documentation](https://cromwell.readthedocs.io/en/stable/Configuring#hybrid-metadata-storage-classic-carbonite) for more details. . #### Adding support for Google Cloud Life Sciences v2beta; Cromwell now supports running workflows using Google Cloud Life Sciences v2beta API in addition to Google Cloud Genomics v2alpha1. ; More information about migration to the new API from v2alpha1 ; [here](https://cromwell.readthedocs.io/en/stable/backends/Google#migration-from-google-cloud-genomics-v2alpha1-to-google-cloud-life-sciences-v2beta). ; * **Note** Google Cloud Life Sciences is the new name for newer versions of Google Cloud Genomics.; * **Note** Support for Google Cloud Genomics v2alpha1 will be removed in a future version of Cromwell. Advance notice will be provided. ### New Docs. #### Installation methods. Links to the conda package and docker container are now available in ; [the install documentation](https://cromwell.readthedocs.io/en/stable/Getting/). ### Bug Fixes. + Fix a bug where zip files with directories could not be imported. ; For example a zip with `a.wdl` and `b.wdl` could be imported but one with `sub_workflows/a.wdl` ; and `imports/b.wdl` could not.; + Fix a bug which sometimes allowed execution scripts copied by a failed cache-copy to be run instead; of the attempt-1 script for a live job execution.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:3581,avail,available,3581,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,1,['avail'],['available']
Availability,"1-19T12:34:56-04:00` will now be formatted as; - `2017-01-19T16:34:56.000Z`. This change only affects newly formatted dates. Older dates already formatted and stored by previous versions of; Cromwell will not be updated however they will still return a; [valid ISO-8601 format](https://en.wikipedia.org/wiki/ISO_8601). The older format may be in various non-UTC time zones,; and may or may not include microseconds or even nanoseconds, for example `2017-01-19T12:34:56.123456789-04:00`. ### Config Changes. #### Heartbeat failure shutdown. When a Cromwell instance is unable to write heartbeats for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend:; ```conf; # Emit a warning if jobs last longer than this amount of time. This might indicate that something got stuck.; backend {; providers {; PAPIv2 {; config { ; slow-job-warning-time: 24 hours; }; }; }; }; ```. ### Runtime Attributes. #### GPU Attributes. * The `gpuType` attribute is no longer validated against a whitelist at workflow submission time. Instead, validation now happens at runtime. T",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:1967,failure,failure-shutdown-duration,1967,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,1,['failure'],['failure-shutdown-duration']
Availability,"avase/8/docs/api/java/time/OffsetDateTime.html#toString--) which; generates a variety of ISO-8601 formats. String conversions also retained whatever server time zone generated that; specific time instance. Going forward, times stored in Cromwell metadata, and later returned via the HTTP endpoint, are now converted to UTC; then formatted with exactly three digits of milliseconds. For example:; - `2017-01-19T12:34:56-04:00` will now be formatted as; - `2017-01-19T16:34:56.000Z`. This change only affects newly formatted dates. Older dates already formatted and stored by previous versions of; Cromwell will not be updated however they will still return a; [valid ISO-8601 format](https://en.wikipedia.org/wiki/ISO_8601). The older format may be in various non-UTC time zones,; and may or may not include microseconds or even nanoseconds, for example `2017-01-19T12:34:56.123456789-04:00`. ### Config Changes. #### Heartbeat failure shutdown. When a Cromwell instance is unable to write heartbeats for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:1586,heartbeat,heartbeats,1586,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,2,"['down', 'heartbeat']","['down', 'heartbeats']"
Availability,"end specific config ...; }; }; SGE {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }r; }; }; }; ```; - A new `/stats` endpoint has been added to get workflow and job count for a Cromwell running in server mode.; - Renamed Workflow Options:; “workflow_log_dir” -> “final_workflow_log_dir”; “call_logs_dir” -> “final_call_logs_dir”; “outputs_path” -> “final_workflow_outputs_dir”; “defaultRuntimeOptions” -> “default_runtime_attributes”; - Timing diagrams endpoint has been updated to include additional state information about jobs.; - Add support for Google Private IPs through `noAddress` runtime attribute. If set to true, the VM will NOT be provided with a public IP address.; _Important_: Your project must be whitelisted in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task {; command {; echo ""I'm private !""; }. runtime {; docker: ""ubuntu:latest""; noAddress: true; }; }; ```; - The Local and the SGE backend have been merged into a generic; Shared File System (SFS) backend. This updated backend can be configured; to work with various other command line dispatchers such as LSF. See the; [README](README.md#sun-gridengine-backend) for more info.; - On the JES and SFS backends, task `command` blocks are now always; passed absolute paths for input `File`s.; - On the SFS backends, the call directory now contains two sub-directories:; - `inputs` contains all the input files that have been localized for this task (see next below for more details); - `execution` contains all other files (script, logs, rc, potential outputs etc...); - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc.; - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.d",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:2016,echo,echo,2016,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,1,['echo'],['echo']
Availability,"lease plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [documentation on localization](https://cromwell.readthedocs.io/en/stable/backends/HPC). #### Yaml node limits. Yaml parsing now checks for cycles, and limits the maximum number of parsed nodes to a configurable value. It also; limits the nesting depth of sequences and mappings. See [the documentation on configuring; YAML](https://cromwell.readthedocs.io/en/stable/Configuring/#yaml) for more information. ### API Changes. #### Workflow Metadata. * It is now possible to use `includeKey` and `excludeKey` at the same time. If so, the metadata key must match the `includeKey` **and not** match the `excludeKey` to be included.; * It is now possible to use ""`calls`"" as one of your `excludeKey`s, to request that only workflow metadata gets returned. ### PostgreSQL support. Cromwell now supports PostgreSQL (version 9.6 or higher, with the Large Object; extension installed) as a database backend.; See [h",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:1921,avail,available,1921,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['avail'],['available']
Availability,"omwell metadata, and later returned via the HTTP endpoint, are now converted to UTC; then formatted with exactly three digits of milliseconds. For example:; - `2017-01-19T12:34:56-04:00` will now be formatted as; - `2017-01-19T16:34:56.000Z`. This change only affects newly formatted dates. Older dates already formatted and stored by previous versions of; Cromwell will not be updated however they will still return a; [valid ISO-8601 format](https://en.wikipedia.org/wiki/ISO_8601). The older format may be in various non-UTC time zones,; and may or may not include microseconds or even nanoseconds, for example `2017-01-19T12:34:56.123456789-04:00`. ### Config Changes. #### Heartbeat failure shutdown. When a Cromwell instance is unable to write heartbeats for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend:; ```conf; # Emit a warning if jobs last longer than this amount of time. This might indicate that something got stuck.; backend {; providers {; PAPIv2 {; config { ; slow-job-warning-time: 24 hours; }; }; }; }; ```. ### Runtime Attributes",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:1835,heartbeat,heartbeats,1835,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,1,['heartbeat'],['heartbeats']
Availability,"ree digits of milliseconds. For example:; - `2017-01-19T12:34:56-04:00` will now be formatted as; - `2017-01-19T16:34:56.000Z`. This change only affects newly formatted dates. Older dates already formatted and stored by previous versions of; Cromwell will not be updated however they will still return a; [valid ISO-8601 format](https://en.wikipedia.org/wiki/ISO_8601). The older format may be in various non-UTC time zones,; and may or may not include microseconds or even nanoseconds, for example `2017-01-19T12:34:56.123456789-04:00`. ### Config Changes. #### Heartbeat failure shutdown. When a Cromwell instance is unable to write heartbeats for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend:; ```conf; # Emit a warning if jobs last longer than this amount of time. This might indicate that something got stuck.; backend {; providers {; PAPIv2 {; config { ; slow-job-warning-time: 24 hours; }; }; }; }; ```. ### Runtime Attributes. #### GPU Attributes. * The `gpuType` attribute is no longer validated against a whitelist at workflow submission ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:1950,heartbeat,heartbeats,1950,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,1,['heartbeat'],['heartbeats']
Availability,"ut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend:; ```conf; # Emit a warning if jobs last longer than this amount of time. This might indicate that something got stuck.; backend {; providers {; PAPIv2 {; config { ; slow-job-warning-time: 24 hours; }; }; }; }; ```. ### Runtime Attributes. #### GPU Attributes. * The `gpuType` attribute is no longer validated against a whitelist at workflow submission time. Instead, validation now happens at runtime. This allows any valid accelerator to be used.; * The `nvidiaDriverVersion` attribute is now available in WDL `runtime` sections. The default continues to be `390.46` which applies if and only if GPUs are being used.; * A default `gpuType` (""nvidia-tesla-k80"") will now be applied if `gpuCount` is specified but `gpuType` is not.; * Similarly, a default `gpuCount` (1) will be applied if `gpuType` is specified but `cpuCount` is not. . ### Bug fixes. #### Better validation of workflow heartbeats. An error will be thrown on startup when the `system.workflow-heartbeats.heartbeat-interval` is not less than the; `system.workflow-heartbeats.ttl`.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:3093,avail,available,3093,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,6,"['avail', 'error', 'heartbeat']","['available', 'error', 'heartbeat-interval', 'heartbeats']"
Deployability," not be usable during the time the Liquibase migration for this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 100,000 `CALL_CACHING_HASH_ENTRY`; rows per second. In deployments with millions or billions of `CALL_CACHING_HASH_ENTRY` rows the migration may require ; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [documentation on localization](https://cromwell.readthedocs.io/en/stable/backends/HPC). #### Yaml node limits. Yaml parsing now checks for cycles, and limits the maximum number of parsed nodes to a configurable value. It also; limits the nesting depth of sequences and mappings. See [the documentation on configuring; YAML](https://cromwell.readthedocs.io/en/stable/Configuring/#yaml) for more information. ### API Changes. #### Workflow Metadata. * It is now possible to use `includeKey` and `excludeKey` at the same time. If so, the ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:1542,configurat,configuration,1542,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['configurat'],['configuration']
Deployability," possible to use WDL disk attributes with the following formats on AWS.; ```; disks: ""local-disk 20 SSD""; ```; ```; disks: ""/some/mnt 20 SSD""; ```; Because Cromwell's AWS backend auto-sizes disks, the size specification is simply discarded. ### Time Formatting. In previous versions of Cromwell, times were converted to strings using; [the default Java formatter](https://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html#toString--) which; generates a variety of ISO-8601 formats. String conversions also retained whatever server time zone generated that; specific time instance. Going forward, times stored in Cromwell metadata, and later returned via the HTTP endpoint, are now converted to UTC; then formatted with exactly three digits of milliseconds. For example:; - `2017-01-19T12:34:56-04:00` will now be formatted as; - `2017-01-19T16:34:56.000Z`. This change only affects newly formatted dates. Older dates already formatted and stored by previous versions of; Cromwell will not be updated however they will still return a; [valid ISO-8601 format](https://en.wikipedia.org/wiki/ISO_8601). The older format may be in various non-UTC time zones,; and may or may not include microseconds or even nanoseconds, for example `2017-01-19T12:34:56.123456789-04:00`. ### Config Changes. #### Heartbeat failure shutdown. When a Cromwell instance is unable to write heartbeats for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Beca",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:1214,update,updated,1214,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,1,['update'],['updated']
Deployability,"""; }; }; ```; - Changed the JES runtime attributes `defaultDisks` and `defaultZones` to be simply `disks` and `zones` respectively.; - Liquibase scripts now run automatically. Non-persistent, in-memory databases are not affected. However Cromwell will; not start if it detects evidence of manually run liquibase migrations in a persistent database. Instead, before Cromwell; will start cleanly, the database should backed up, and then this SQL should be manually executed:. ``` sql; update DATABASECHANGELOG; set MD5SUM = null,; FILENAME = substr(FILENAME, instr(FILENAME, ""src/main/migrations/"") + length(""src/main/migrations/"")); where FILENAME like '%src/main/migrations/%'; ```; - Added Preemptible VMs support for JES. This has impacts on the API Endpoint responses as a Call/Shard can now be attempted multiple times. Each attempt will have its own entry.; - Added custom thread pool to workaround Slick [deadlocks](https://github.com/slick/slick/issues/1274). The thread pool; size defaults to the Slick configuration value `db.numThreads`, but may be increased up to Slick's; `db.maxConnections`, via a new property `actionThreadPoolSize`.; - Added support for [size](https://github.com/broadinstitute/wdl/blob/develop/SPEC.md#float-sizefile-string) WDL standard library function.; - Allow for runtime attribute values to be interpreted as full expressions. For example:. ```; task example {; String ubuntu_tag; command { ... }; runtime {; docker: ""ubuntu:"" + ubuntu_tag; }; }; ```; - Add runtime attributes in Call metadata :. ```; {; ""workflowName"": ""hello"",; ""calls"": {; ""hello.hello"": [; {; ...,; ""runtimeAttributes"": {; ""preemptible"": ""0"",; ""failOnStderr"": ""false"",; ""disks"": ""local-disk 10 SSD"",; ""continueOnReturnCode"": ""0"",; ""docker"": ""ubuntu:latest"",; ""cpu"": ""1"",; ""zones"": ""us-central1-a"",; ""memory"": ""2GB""; },; ...; }; ]; }; }; ```; - Added ""preemptible"" field in Call metadata. This only appears if the backend is JES. ```; {; ""workflowName"": ""hello"",; ""calls"": {; ""hello.hello"": [",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.18:1401,configurat,configuration,1401,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.18,1,['configurat'],['configuration']
Deployability,"# Cromwell Change Log. ## 0.21; - Warning: Significant database updates when you switch from version 0.19 to 0.21 of Cromwell.; There may be a long wait period for the migration to finish for large databases.; Please refer to [MIGRATION.md](https://github.com/broadinstitute/cromwell/blob/master/MIGRATION.md) for more details.; - There are significant architectural changes related to increases in performance and scaling.; - The biggest user-facing changes from 0.19 to 0.21 are related to the application.conf file, which has been restructured significantly.; The configuration for backends now is all contained within a `backend` stanza, which specifies 1 stanza per name per backend and a default backend, as follows:. ```; backend {; default=Local; providers {; Local {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; JES {; actor-factory = ""cromwell.backend.impl.jes.JesBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; SGE {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }r; }; }; }; ```; - A new `/stats` endpoint has been added to get workflow and job count for a Cromwell running in server mode.; - Renamed Workflow Options:; “workflow_log_dir” -> “final_workflow_log_dir”; “call_logs_dir” -> “final_call_logs_dir”; “outputs_path” -> “final_workflow_outputs_dir”; “defaultRuntimeOptions” -> “default_runtime_attributes”; - Timing diagrams endpoint has been updated to include additional state information about jobs.; - Add support for Google Private IPs through `noAddress` runtime attribute. If set to true, the VM will NOT be provided with a public IP address.; _Important_: Your project must be whitelisted in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:64,update,updates,64,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,2,"['configurat', 'update']","['configuration', 'updates']"
Deployability,"## 31 Release Notes. * **Cromwell server** ; The Cromwell server source code is now located under `server/src`. `sbt assembly` will build the runnable Cromwell JAR in ; `server/target/scala-2.12/` with a name like `cromwell-<VERSION>.jar`. * **Robustness**; + The rate at which jobs are being started can now be controlled using the `system.job-rate-control` configuration stanza. ; + A load controller service has been added to allow Cromwell to self-monitor and adjust its load accordingly.; The load controller is currently a simple on/off switch controlling the job start rate. It gathers metrics from different parts of the system; to inform its decision to stop the creation of jobs.; You can find relevant configuration in the `services.LoadController` section of the `cromwell.examples.conf` file,; as well as in the `load-control` section in `reference.conf`.; The load level of the monitored sub-systems are instrumented and can be found under the `cromwell.load` statsD path.; + The statsD metrics have been re-shuffled a bit. If you had a dashboard you might find that you need to update it.; Changes include: ; + Removed artificially inserted ""count"" and ""timing"" the path; + Added a `load` section; + Metrics were prefixed twice with `cromwell` (`cromwell.cromwell.my_metric`), now they're only prefixed once; + Added `processed` and `queue` metrics under various metrics monitoring the throughput and amount of queued work respectively; + Added a memory metric representing an estimation of the free memory Cromwell thinks it has left. * Added a configuration option under `docker.hash-lookup.enabled` to disable docker hash lookup.; Disabling it will also disable call caching for jobs with floating docker tags.; ; * **Rest API** ; + Updated the `/query` response to include the total number of query results returned. See [here](http://cromwell.readthedocs.io/en/develop/api/RESTAPI/#workflowqueryresponse) for more information.; * **Language APIs** ; + The WDL library import from C",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/31:359,configurat,configuration,359,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/31,2,['configurat'],['configuration']
Deployability,"## 40 Release Notes. ### Config Changes. #### Cromwell ID in instrumentation path. When set, the configuration value of `system.cromwell_id` will be prepended to StatsD metrics. More info [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### HealthMonitor Configuration. The HealthMonitor configuration has been refactored to provide a simpler interface:; * You no longer need to specify a monitor class in your `cromwell.conf` as this will now be inherited from the `reference.conf` value.; * You can now opt-in and opt-out of any combination of status monitors.; * The PAPI backends to monitor can now be listed in a single field. ##### Upgrading. You are no longer tied to the previous preset combinations of health checks. However if you just want to carry forward; the exact same set of health checks, you can use one of the following standard recipes:. ###### From default, or `NoopHealthMonitorActor`:; If you're currently using the (default) NoopHealthMonitorActor, no action is required. ###### From `StandardHealthMonitorServiceActor`:; If you're currently using the `StandardHealthMonitorServiceActor`, replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.standard.StandardHealthMonitorServiceActor""; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; }; }; }; ``` ; ###### From `WorkbenchHealthMonitorServiceActor`:; Replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.workbench.WorkbenchHealthMonitorServiceActor"". config {; papi-backend-name = PAPIv1; papi-v2-backend-name = PAPIv2. google-auth-name = service-account; gcs-bucket-to-check = ""cromwell-ping-me-bucket""; }; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; check-gcs: true; check-papi-backends: [PAPIv1, PAPIv2]. google-auth-name = service-account",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/40:97,configurat,configuration,97,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/40,2,['configurat'],['configuration']
Deployability,"## 43 Release Notes. ### Virtual Private Cloud with Subnetworks. Cromwell now allows PAPIV2 jobs to run on a specific subnetwork inside a private network by adding the subnetwork key ; `subnetwork-label-key` inside `virtual-private-cloud` in backend configuration. More info [here](https://cromwell.readthedocs.io/en/stable/backends/Google/). ### Call caching database refactoring. Cromwell's `CALL_CACHING_HASH_ENTRY` primary key has been refactored to use a `BIGINT` datatype in place of the previous; `INT` datatype. Cromwell will not be usable during the time the Liquibase migration for this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 100,000 `CALL_CACHING_HASH_ENTRY`; rows per second. In deployments with millions or billions of `CALL_CACHING_HASH_ENTRY` rows the migration may require ; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [doc",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:250,configurat,configuration,250,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,2,"['configurat', 'deploy']","['configuration', 'deployments']"
Deployability,"## 49 Release Notes. ### Changes and Warnings. #### Job store database refactoring. The primary keys of Cromwell's job store tables have been refactored to use a `BIGINT` datatype in place of the previous; `INT` datatype. Cromwell will not be usable during the time the Liquibase migration for this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 40,000 `JOB_STORE_SIMPLETON_ENTRY`; rows per second. In deployments with millions or billions of `JOB_STORE_SIMPLETON_ENTRY` rows the migration may require; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; SELECT table_rows FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'cromwell' AND table_name = 'JOB_STORE_SIMPLETON_ENTRY';; ```. #### Execution Directory Layout (cache copies). When an attempt to copy a cache result is made, you'll now see a `cacheCopy` directory in the call root directory. ; This prevents them clashing with the files staged to the same directory for attempt 1 if the cache copy fails (see also: Bug Fixes). The directory layout used to be:. ```; [...]/callRoot/; - script [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - stdout [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - output.file [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. but is now:. ```; [...]/callRoot/; - cacheCopy/; - script; - stdout; - output.file; - script [for attempt 1 if the cache copy fails]; - stdout [for attempt 1 if the cache copy fails]; - output.file [for attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. ### New Functionality. #### Disable call-caching for tasks. It is now possible to indicate in a workflow that a task should not ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:469,deploy,deployments,469,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,1,['deploy'],['deployments']
Deployability,", are now converted to UTC; then formatted with exactly three digits of milliseconds. For example:; - `2017-01-19T12:34:56-04:00` will now be formatted as; - `2017-01-19T16:34:56.000Z`. This change only affects newly formatted dates. Older dates already formatted and stored by previous versions of; Cromwell will not be updated however they will still return a; [valid ISO-8601 format](https://en.wikipedia.org/wiki/ISO_8601). The older format may be in various non-UTC time zones,; and may or may not include microseconds or even nanoseconds, for example `2017-01-19T12:34:56.123456789-04:00`. ### Config Changes. #### Heartbeat failure shutdown. When a Cromwell instance is unable to write heartbeats for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend:; ```conf; # Emit a warning if jobs last longer than this amount of time. This might indicate that something got stuck.; backend {; providers {; PAPIv2 {; config { ; slow-job-warning-time: 24 hours; }; }; }; }; ```. ### Runtime Attributes. #### GPU Attributes. * The `gpuType` attribute is no lon",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:1913,configurat,configuration,1913,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,1,['configurat'],['configuration']
Deployability,"- The deprecated parse, validate, inputs and highlight functionality from the command line tool has been removed in favor of wdltool (https://github.com/broadinstitute/wdltool); - Workflow options can now include a `defaultRuntimeOptions` section, so that the same runtime attribute is not needed in every single WDL task. E.g.:. ```; {; ""defaultRuntimeOptions"": {; ""docker"": ""ubuntu:latest""; }; }; ```; - Changed the JES runtime attributes `defaultDisks` and `defaultZones` to be simply `disks` and `zones` respectively.; - Liquibase scripts now run automatically. Non-persistent, in-memory databases are not affected. However Cromwell will; not start if it detects evidence of manually run liquibase migrations in a persistent database. Instead, before Cromwell; will start cleanly, the database should backed up, and then this SQL should be manually executed:. ``` sql; update DATABASECHANGELOG; set MD5SUM = null,; FILENAME = substr(FILENAME, instr(FILENAME, ""src/main/migrations/"") + length(""src/main/migrations/"")); where FILENAME like '%src/main/migrations/%'; ```; - Added Preemptible VMs support for JES. This has impacts on the API Endpoint responses as a Call/Shard can now be attempted multiple times. Each attempt will have its own entry.; - Added custom thread pool to workaround Slick [deadlocks](https://github.com/slick/slick/issues/1274). The thread pool; size defaults to the Slick configuration value `db.numThreads`, but may be increased up to Slick's; `db.maxConnections`, via a new property `actionThreadPoolSize`.; - Added support for [size](https://github.com/broadinstitute/wdl/blob/develop/SPEC.md#float-sizefile-string) WDL standard library function.; - Allow for runtime attribute values to be interpreted as full expressions. For example:. ```; task example {; String ubuntu_tag; command { ... }; runtime {; docker: ""ubuntu:"" + ubuntu_tag; }; }; ```; - Add runtime attributes in Call metadata :. ```; {; ""workflowName"": ""hello"",; ""calls"": {; ""hello.hello"": [; {; ...,; ""r",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.18:873,update,update,873,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.18,1,['update'],['update']
Deployability,"//cromwell.readthedocs.io/en/stable/optimizations/VolatileTasks). #### Delete Intermediate Outputs on PapiV2. * **Experimental:** When a new workflow option `delete_intermediate_output_files` is submitted with the workflow,; intermediate `File` objects will be deleted when the workflow completes. See the [Google Pipelines API Workflow Options; documentation](https://cromwell.readthedocs.io/en/stable/wf_options/Google#google-pipelines-api-workflow-options); for more information. #### Metadata Archival Support. Cromwell 49 now offers the option to archive metadata to GCS and remove the equivalent metadata from relational; database storage. Please see ; [the documentation](https://cromwell.readthedocs.io/en/stable/Configuring#hybrid-metadata-storage-classic-carbonite) for more details. . #### Adding support for Google Cloud Life Sciences v2beta; Cromwell now supports running workflows using Google Cloud Life Sciences v2beta API in addition to Google Cloud Genomics v2alpha1. ; More information about migration to the new API from v2alpha1 ; [here](https://cromwell.readthedocs.io/en/stable/backends/Google#migration-from-google-cloud-genomics-v2alpha1-to-google-cloud-life-sciences-v2beta). ; * **Note** Google Cloud Life Sciences is the new name for newer versions of Google Cloud Genomics.; * **Note** Support for Google Cloud Genomics v2alpha1 will be removed in a future version of Cromwell. Advance notice will be provided. ### New Docs. #### Installation methods. Links to the conda package and docker container are now available in ; [the install documentation](https://cromwell.readthedocs.io/en/stable/Getting/). ### Bug Fixes. + Fix a bug where zip files with directories could not be imported. ; For example a zip with `a.wdl` and `b.wdl` could be imported but one with `sub_workflows/a.wdl` ; and `imports/b.wdl` could not.; + Fix a bug which sometimes allowed execution scripts copied by a failed cache-copy to be run instead; of the attempt-1 script for a live job execution.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:3601,install,install,3601,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,1,['install'],['install']
Deployability,"All call caching keys are now in a `callCaching` stanza. `Call cache read result` has moved here and is now `result`. The `allowResultReuse` and `effectiveCallCachingMode` have moved here. The `hit` boolean is a simple indication of whether or not it was a hit, with no additional information. An example using the new format is:; ```; ""callCaching"": {; ""hit"": false,; ""effectiveCallCachingMode"": ""ReadAndWriteCache"",; ""result"": ""Cache Miss"",; ""allowResultReuse"": true; }; ```. ### Config Changes. * Added a field `insert-batch-size` to the `database` stanza which defines how many values from a batch insert will be processed at a time. This value defaults to 2000. ; * Moved the config value `services.MetadataService.metadata-summary-refresh-interval` to `services.MetadataService.config.metadata-summary-refresh-interval`; * Added ability to override the default zone(s) used by JES via the config structure by setting `genomics.default-zones` in the JES configuration; * The cromwell server TCP binding timeout is now configurable via the config key `webservice.binding-timeout`, defaulted; to the previous value `5s` (five seconds) via the reference.conf.; * For MySQL users, a massive scalability improvement via batched DB writing of internal metadata events. Note that one must add `rewriteBatchedStatements=true` to their JDBC URL in their config in order to take advantage of this. ### General Changes. * Cromwell's WDL parser now recognizes empty array literals correctly, e.g. `Array[String] emptyArray = []`.; * Cromwell now applies default labels automatically to JES pipeline runs.; * Added support for new WDL functions:; * `length: (Array[X]) => Integer` - report the length of the specified array; * `prefix: (String, Array[X]) => Array[String]` - generate an array consisting of each element of the input array prefixed; by a specified `String`. The input array can have elements of any primitive type, the return array will always have; type `Array[String]`.; * `defined: (Any) =",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/25:1160,configurat,configuration,1160,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/25,1,['configurat'],['configuration']
Deployability,"HING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [documentation on localization](https://cromwell.readthedocs.io/en/stable/backends/HPC). #### Yaml node limits. Yaml parsing now checks for cycles, and limits the maximum number of parsed nodes to a configurable value. It also; limits the nesting depth of sequences and mappings. See [the documentation on configuring; YAML](https://cromwell.readthedocs.io/en/stable/Configuring/#yaml) for more information. ### API Changes. #### Workflow Metadata. * It is now possible to use `includeKey` and `excludeKey` at the same time. If so, the metadata key must match the `includeKey` **and not** match the `excludeKey` to be included.; * It is now possible to use ""`calls`"" as one of your `excludeKey`s, to request that only workflow metadata gets returned. ### PostgreSQL support. Cromwell now supports PostgreSQL (version 9.6 or higher, with the Large Object; extension installed) as a database backend.; See [here](https://cromwell.readthedocs.io/en/stable/Configuring/#database) for; instructions for configuring the database connection.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:2862,install,installed,2862,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['install'],['installed']
Deployability,"Y`; rows per second. In deployments with millions or billions of `CALL_CACHING_HASH_ENTRY` rows the migration may require ; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [documentation on localization](https://cromwell.readthedocs.io/en/stable/backends/HPC). #### Yaml node limits. Yaml parsing now checks for cycles, and limits the maximum number of parsed nodes to a configurable value. It also; limits the nesting depth of sequences and mappings. See [the documentation on configuring; YAML](https://cromwell.readthedocs.io/en/stable/Configuring/#yaml) for more information. ### API Changes. #### Workflow Metadata. * It is now possible to use `includeKey` and `excludeKey` at the same time. If so, the metadata key must match the `includeKey` **and not** match the `excludeKey` to be included.; * It is now possible to use ""`calls`"" as one of your `excludeKey`s, to request that only workflow metadata gets retu",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:1725,configurat,configuration,1725,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['configurat'],['configuration']
Deployability,"as decided to remove it from the codebase in order to narrow the scope of Cromwell code. . ### Improved DRS Localizer logging. Error logging while localizing a DRS URI should now be more clear especially when there is a Requester Pays bucket involved. ### Per-backend hog factors; Cromwell now allows overriding system-level log factors on back-end level. First, Cromwell will try to use hog-factor ; defined in the backend config, and if it is not defined, it will default to using system-wide hog factor.; ```conf; backend {; providers {; PAPIv2 {; config {; hog-factor: 2; }; }; }; }; ```; For more information about hog factors please see [this page](https://cromwell.readthedocs.io/en/develop/cromwell_features/HogFactors/). ### `martha_v2` Support Removed. Cromwell now only supports resolving DOS or DRS URIs through [Martha](https://github.com/broadinstitute/martha)'s most; recent metadata endpoint `martha_v3`, dropping support for Martha's previous metadata endpoint `martha_v2`. To switch to; the new version of Martha's metadata endpoint, update the `martha.url` found in the [filesystems; config](https://cromwell.readthedocs.io/en/stable/filesystems/Filesystems/#overview) to point to `/martha_v3`. More; information on Martha's `martha_v3` request and response schema can be found; [here](https://github.com/broadinstitute/martha#martha-v3). ### DOS/DRS `localization_optional` Support. When running on a backend that supports `localization_optional: true` any DOS or DRS `File` values in the generated; command line will be substituted with the `gsUri` returned from Martha's `martha_v3` endpoint. More information on; `localization_optional` can be found [here](https://cromwell.readthedocs.io/en/stable/optimizations/FileLocalization/). ### DOS/DRS metadata retrieval retried by default. Attempts to retrieve DOS/DRS metadata from Martha will be retried by default. More information can be found; [here](https://cromwell.readthedocs.io/en/stable/filesystems/Filesystems/#overview).",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/54:1553,update,update,1553,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/54,1,['update'],['update']
Deployability,"e code is now located under `server/src`. `sbt assembly` will build the runnable Cromwell JAR in ; `server/target/scala-2.12/` with a name like `cromwell-<VERSION>.jar`. * **Robustness**; + The rate at which jobs are being started can now be controlled using the `system.job-rate-control` configuration stanza. ; + A load controller service has been added to allow Cromwell to self-monitor and adjust its load accordingly.; The load controller is currently a simple on/off switch controlling the job start rate. It gathers metrics from different parts of the system; to inform its decision to stop the creation of jobs.; You can find relevant configuration in the `services.LoadController` section of the `cromwell.examples.conf` file,; as well as in the `load-control` section in `reference.conf`.; The load level of the monitored sub-systems are instrumented and can be found under the `cromwell.load` statsD path.; + The statsD metrics have been re-shuffled a bit. If you had a dashboard you might find that you need to update it.; Changes include: ; + Removed artificially inserted ""count"" and ""timing"" the path; + Added a `load` section; + Metrics were prefixed twice with `cromwell` (`cromwell.cromwell.my_metric`), now they're only prefixed once; + Added `processed` and `queue` metrics under various metrics monitoring the throughput and amount of queued work respectively; + Added a memory metric representing an estimation of the free memory Cromwell thinks it has left. * Added a configuration option under `docker.hash-lookup.enabled` to disable docker hash lookup.; Disabling it will also disable call caching for jobs with floating docker tags.; ; * **Rest API** ; + Updated the `/query` response to include the total number of query results returned. See [here](http://cromwell.readthedocs.io/en/develop/api/RESTAPI/#workflowqueryresponse) for more information.; * **Language APIs** ; + The WDL library import from Cromwell 30 has split in two and its scala packages have changed. ; + ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/31:1093,update,update,1093,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/31,1,['update'],['update']
Deployability,"ime zones,; and may or may not include microseconds or even nanoseconds, for example `2017-01-19T12:34:56.123456789-04:00`. ### Config Changes. #### Heartbeat failure shutdown. When a Cromwell instance is unable to write heartbeats for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend:; ```conf; # Emit a warning if jobs last longer than this amount of time. This might indicate that something got stuck.; backend {; providers {; PAPIv2 {; config { ; slow-job-warning-time: 24 hours; }; }; }; }; ```. ### Runtime Attributes. #### GPU Attributes. * The `gpuType` attribute is no longer validated against a whitelist at workflow submission time. Instead, validation now happens at runtime. This allows any valid accelerator to be used.; * The `nvidiaDriverVersion` attribute is now available in WDL `runtime` sections. The default continues to be `390.46` which applies if and only if GPUs are being used.; * A default `gpuType` (""nvidia-tesla-k80"") will now be applied if `gpuCount` is specified but `gpuType` is not.; * Similarly, a default `gpuCount` (",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:2390,configurat,configuration,2390,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,1,['configurat'],['configuration']
Deployability,"in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task {; command {; echo ""I'm private !""; }. runtime {; docker: ""ubuntu:latest""; noAddress: true; }; }; ```; - The Local and the SGE backend have been merged into a generic; Shared File System (SFS) backend. This updated backend can be configured; to work with various other command line dispatchers such as LSF. See the; [README](README.md#sun-gridengine-backend) for more info.; - On the JES and SFS backends, task `command` blocks are now always; passed absolute paths for input `File`s.; - On the SFS backends, the call directory now contains two sub-directories:; - `inputs` contains all the input files that have been localized for this task (see next below for more details); - `execution` contains all other files (script, logs, rc, potential outputs etc...); - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc.; - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc. . For example:. ```; # use a mysql database; database {; driver = ""slick.driver.MySQLDriver$""; db {; driver = ""com.mysql.jdbc.Driver""; url = ""jdbc:mysql://host/cromwell""; user = ""user""; password = ""pass""; connectionTimeout = 5000; }; }; ```. ## 0.20; - The default per-upload bytes size for GCS is now the minumum 256K; instead of 64M. There is also an undocumented config key; `google.upload-buffer-bytes` that allows adjusting this internal value.; - Updated Docker Hub hash retriever to parse json with [custom media; types](https://github.com/docker/distribution/blob/05b0ab0/docs/spec/manifest-v2-1.md).; - Added a `/batch` submit endpoint that accepts a single wdl with; multiple input files.; - The `/query` endpoint now supports querying by `id`, and submitting; parameters as a HTTP POST.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:2929,configurat,configuration,2929,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,1,['configurat'],['configuration']
Deployability,"ject must be whitelisted in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task {; command {; echo ""I'm private !""; }. runtime {; docker: ""ubuntu:latest""; noAddress: true; }; }; ```; - The Local and the SGE backend have been merged into a generic; Shared File System (SFS) backend. This updated backend can be configured; to work with various other command line dispatchers such as LSF. See the; [README](README.md#sun-gridengine-backend) for more info.; - On the JES and SFS backends, task `command` blocks are now always; passed absolute paths for input `File`s.; - On the SFS backends, the call directory now contains two sub-directories:; - `inputs` contains all the input files that have been localized for this task (see next below for more details); - `execution` contains all other files (script, logs, rc, potential outputs etc...); - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc.; - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc. . For example:. ```; # use a mysql database; database {; driver = ""slick.driver.MySQLDriver$""; db {; driver = ""com.mysql.jdbc.Driver""; url = ""jdbc:mysql://host/cromwell""; user = ""user""; password = ""pass""; connectionTimeout = 5000; }; }; ```. ## 0.20; - The default per-upload bytes size for GCS is now the minumum 256K; instead of 64M. There is also an undocumented config key; `google.upload-buffer-bytes` that allows adjusting this internal value.; - Updated Docker Hub hash retriever to parse json with [custom media; types](https://github.com/docker/distribution/blob/05b0ab0/docs/spec/manifest-v2-1.md).; - Added a `/batch` submit endpoint that accepts a single wdl with; multiple input files.; - The `/query` endpoint now supports querying by `id`, and submitting; p",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:2796,configurat,configuration,2796,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,1,['configurat'],['configuration']
Deployability,"nment this migration runs at a rate of approximately 100,000 `CALL_CACHING_HASH_ENTRY`; rows per second. In deployments with millions or billions of `CALL_CACHING_HASH_ENTRY` rows the migration may require ; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [documentation on localization](https://cromwell.readthedocs.io/en/stable/backends/HPC). #### Yaml node limits. Yaml parsing now checks for cycles, and limits the maximum number of parsed nodes to a configurable value. It also; limits the nesting depth of sequences and mappings. See [the documentation on configuring; YAML](https://cromwell.readthedocs.io/en/stable/Configuring/#yaml) for more information. ### API Changes. #### Workflow Metadata. * It is now possible to use `includeKey` and `excludeKey` at the same time. If so, the metadata key must match the `includeKey` **and not** match the `excludeKey` to be included.; * It is now possible to use ""`cal",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:1662,update,updated,1662,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['update'],['updated']
Deployability,"o 0.21 are related to the application.conf file, which has been restructured significantly.; The configuration for backends now is all contained within a `backend` stanza, which specifies 1 stanza per name per backend and a default backend, as follows:. ```; backend {; default=Local; providers {; Local {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; JES {; actor-factory = ""cromwell.backend.impl.jes.JesBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; SGE {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }r; }; }; }; ```; - A new `/stats` endpoint has been added to get workflow and job count for a Cromwell running in server mode.; - Renamed Workflow Options:; “workflow_log_dir” -> “final_workflow_log_dir”; “call_logs_dir” -> “final_call_logs_dir”; “outputs_path” -> “final_workflow_outputs_dir”; “defaultRuntimeOptions” -> “default_runtime_attributes”; - Timing diagrams endpoint has been updated to include additional state information about jobs.; - Add support for Google Private IPs through `noAddress` runtime attribute. If set to true, the VM will NOT be provided with a public IP address.; _Important_: Your project must be whitelisted in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task {; command {; echo ""I'm private !""; }. runtime {; docker: ""ubuntu:latest""; noAddress: true; }; }; ```; - The Local and the SGE backend have been merged into a generic; Shared File System (SFS) backend. This updated backend can be configured; to work with various other command line dispatchers such as LSF. See the; [README](README.md#sun-gridengine-backend) for more info.; - On the JES and SFS backends, task `command` blocks are now always; passed absolute paths for",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:1572,update,updated,1572,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,1,['update'],['updated']
Deployability,"ob start rate. It gathers metrics from different parts of the system; to inform its decision to stop the creation of jobs.; You can find relevant configuration in the `services.LoadController` section of the `cromwell.examples.conf` file,; as well as in the `load-control` section in `reference.conf`.; The load level of the monitored sub-systems are instrumented and can be found under the `cromwell.load` statsD path.; + The statsD metrics have been re-shuffled a bit. If you had a dashboard you might find that you need to update it.; Changes include: ; + Removed artificially inserted ""count"" and ""timing"" the path; + Added a `load` section; + Metrics were prefixed twice with `cromwell` (`cromwell.cromwell.my_metric`), now they're only prefixed once; + Added `processed` and `queue` metrics under various metrics monitoring the throughput and amount of queued work respectively; + Added a memory metric representing an estimation of the free memory Cromwell thinks it has left. * Added a configuration option under `docker.hash-lookup.enabled` to disable docker hash lookup.; Disabling it will also disable call caching for jobs with floating docker tags.; ; * **Rest API** ; + Updated the `/query` response to include the total number of query results returned. See [here](http://cromwell.readthedocs.io/en/develop/api/RESTAPI/#workflowqueryresponse) for more information.; * **Language APIs** ; + The WDL library import from Cromwell 30 has split in two and its scala packages have changed. ; + The WDL draft 2 parser is now in `cromwell-wdl-model-draft2` and its classes have moved from the `wdl4s.parser` package to `wdl.draft2.parser`.; + The WDL object model is now in `cromwell-wdl-model-draft2` and its classes have moved from the `wdl` package to `wdl.draft2.model`.; + The WDL to WOM transform functions are now in `cromwell-wdl-transforms-draft2`. The functions were removed from their object model classes and are now found in their own objects in `wdl.draft2.transforms.wdlom2wom`.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/31:1561,configurat,configuration,1561,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/31,1,['configurat'],['configuration']
Deployability,"ow and job count for a Cromwell running in server mode.; - Renamed Workflow Options:; “workflow_log_dir” -> “final_workflow_log_dir”; “call_logs_dir” -> “final_call_logs_dir”; “outputs_path” -> “final_workflow_outputs_dir”; “defaultRuntimeOptions” -> “default_runtime_attributes”; - Timing diagrams endpoint has been updated to include additional state information about jobs.; - Add support for Google Private IPs through `noAddress` runtime attribute. If set to true, the VM will NOT be provided with a public IP address.; _Important_: Your project must be whitelisted in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task {; command {; echo ""I'm private !""; }. runtime {; docker: ""ubuntu:latest""; noAddress: true; }; }; ```; - The Local and the SGE backend have been merged into a generic; Shared File System (SFS) backend. This updated backend can be configured; to work with various other command line dispatchers such as LSF. See the; [README](README.md#sun-gridengine-backend) for more info.; - On the JES and SFS backends, task `command` blocks are now always; passed absolute paths for input `File`s.; - On the SFS backends, the call directory now contains two sub-directories:; - `inputs` contains all the input files that have been localized for this task (see next below for more details); - `execution` contains all other files (script, logs, rc, potential outputs etc...); - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc.; - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc. . For example:. ```; # use a mysql database; database {; driver = ""slick.driver.MySQLDriver$""; db {; driver = ""com.mysql.jdbc.Driver""; url = ""jdbc:mysql://host/cromwell""; user = ""user""; password = ""pass""; connectionTimeout = 50",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:2209,update,updated,2209,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,1,['update'],['updated']
Deployability,"ready formatted and stored by previous versions of; Cromwell will not be updated however they will still return a; [valid ISO-8601 format](https://en.wikipedia.org/wiki/ISO_8601). The older format may be in various non-UTC time zones,; and may or may not include microseconds or even nanoseconds, for example `2017-01-19T12:34:56.123456789-04:00`. ### Config Changes. #### Heartbeat failure shutdown. When a Cromwell instance is unable to write heartbeats for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend:; ```conf; # Emit a warning if jobs last longer than this amount of time. This might indicate that something got stuck.; backend {; providers {; PAPIv2 {; config { ; slow-job-warning-time: 24 hours; }; }; }; }; ```. ### Runtime Attributes. #### GPU Attributes. * The `gpuType` attribute is no longer validated against a whitelist at workflow submission time. Instead, validation now happens at runtime. This allows any valid accelerator to be used.; * The `nvidiaDriverVersion` attribute is now available in WDL `runtime` sections. The default ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:2189,configurat,configuration,2189,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,1,['configurat'],['configuration']
Deployability,"s]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. but is now:. ```; [...]/callRoot/; - cacheCopy/; - script; - stdout; - output.file; - script [for attempt 1 if the cache copy fails]; - stdout [for attempt 1 if the cache copy fails]; - output.file [for attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. ### New Functionality. #### Disable call-caching for tasks. It is now possible to indicate in a workflow that a task should not be call-cached. See details ; [here](https://cromwell.readthedocs.io/en/stable/optimizations/VolatileTasks). #### Delete Intermediate Outputs on PapiV2. * **Experimental:** When a new workflow option `delete_intermediate_output_files` is submitted with the workflow,; intermediate `File` objects will be deleted when the workflow completes. See the [Google Pipelines API Workflow Options; documentation](https://cromwell.readthedocs.io/en/stable/wf_options/Google#google-pipelines-api-workflow-options); for more information. #### Metadata Archival Support. Cromwell 49 now offers the option to archive metadata to GCS and remove the equivalent metadata from relational; database storage. Please see ; [the documentation](https://cromwell.readthedocs.io/en/stable/Configuring#hybrid-metadata-storage-classic-carbonite) for more details. . #### Adding support for Google Cloud Life Sciences v2beta; Cromwell now supports running workflows using Google Cloud Life Sciences v2beta API in addition to Google Cloud Genomics v2alpha1. ; More information about migration to the new API from v2alpha1 ; [here](https://cromwell.readthedocs.io/en/stable/backends/Google#migration-from-google-cloud-genomics-v2alpha1-to-google-cloud-life-sciences-v2beta). ; * **Note** Google Cloud Life Sciences is the new name for newer versions of Google Cloud Genomics.; * **Note** Support for Google Cloud Genomics v2alpha1 will be removed in a future version of Cromwell. Advance notice will be provid",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:2472,pipeline,pipelines-api-workflow-options,2472,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,1,['pipeline'],['pipelines-api-workflow-options']
Deployability,"which defines how many values from a batch insert will be processed at a time. This value defaults to 2000. ; * Moved the config value `services.MetadataService.metadata-summary-refresh-interval` to `services.MetadataService.config.metadata-summary-refresh-interval`; * Added ability to override the default zone(s) used by JES via the config structure by setting `genomics.default-zones` in the JES configuration; * The cromwell server TCP binding timeout is now configurable via the config key `webservice.binding-timeout`, defaulted; to the previous value `5s` (five seconds) via the reference.conf.; * For MySQL users, a massive scalability improvement via batched DB writing of internal metadata events. Note that one must add `rewriteBatchedStatements=true` to their JDBC URL in their config in order to take advantage of this. ### General Changes. * Cromwell's WDL parser now recognizes empty array literals correctly, e.g. `Array[String] emptyArray = []`.; * Cromwell now applies default labels automatically to JES pipeline runs.; * Added support for new WDL functions:; * `length: (Array[X]) => Integer` - report the length of the specified array; * `prefix: (String, Array[X]) => Array[String]` - generate an array consisting of each element of the input array prefixed; by a specified `String`. The input array can have elements of any primitive type, the return array will always have; type `Array[String]`.; * `defined: (Any) => Boolean` - Will return false if the provided value is an optional that is not defined. Returns true in all other cases.; * Cromwell's Config (Shared Filesystem) backend now supports invocation of commands which run in a Docker image as a non-root user.; The non-root user could either be the default user for a given Docker image (e.g. specified in a Dockerfile via a `USER` directive),; or the Config backend could pass an optional `""-u username""` as part of the `submit-docker` command.; * In some cases the SFS backend, used for Local, SGE, etc., coerced ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/25:1784,pipeline,pipeline,1784,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/25,1,['pipeline'],['pipeline']
Energy Efficiency," been added to allow Cromwell to self-monitor and adjust its load accordingly.; The load controller is currently a simple on/off switch controlling the job start rate. It gathers metrics from different parts of the system; to inform its decision to stop the creation of jobs.; You can find relevant configuration in the `services.LoadController` section of the `cromwell.examples.conf` file,; as well as in the `load-control` section in `reference.conf`.; The load level of the monitored sub-systems are instrumented and can be found under the `cromwell.load` statsD path.; + The statsD metrics have been re-shuffled a bit. If you had a dashboard you might find that you need to update it.; Changes include: ; + Removed artificially inserted ""count"" and ""timing"" the path; + Added a `load` section; + Metrics were prefixed twice with `cromwell` (`cromwell.cromwell.my_metric`), now they're only prefixed once; + Added `processed` and `queue` metrics under various metrics monitoring the throughput and amount of queued work respectively; + Added a memory metric representing an estimation of the free memory Cromwell thinks it has left. * Added a configuration option under `docker.hash-lookup.enabled` to disable docker hash lookup.; Disabling it will also disable call caching for jobs with floating docker tags.; ; * **Rest API** ; + Updated the `/query` response to include the total number of query results returned. See [here](http://cromwell.readthedocs.io/en/develop/api/RESTAPI/#workflowqueryresponse) for more information.; * **Language APIs** ; + The WDL library import from Cromwell 30 has split in two and its scala packages have changed. ; + The WDL draft 2 parser is now in `cromwell-wdl-model-draft2` and its classes have moved from the `wdl4s.parser` package to `wdl.draft2.parser`.; + The WDL object model is now in `cromwell-wdl-model-draft2` and its classes have moved from the `wdl` package to `wdl.draft2.model`.; + The WDL to WOM transform functions are now in `cromwell-wdl-tra",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/31:1386,monitor,monitoring,1386,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/31,1,['monitor'],['monitoring']
Energy Efficiency,"## 31 Release Notes. * **Cromwell server** ; The Cromwell server source code is now located under `server/src`. `sbt assembly` will build the runnable Cromwell JAR in ; `server/target/scala-2.12/` with a name like `cromwell-<VERSION>.jar`. * **Robustness**; + The rate at which jobs are being started can now be controlled using the `system.job-rate-control` configuration stanza. ; + A load controller service has been added to allow Cromwell to self-monitor and adjust its load accordingly.; The load controller is currently a simple on/off switch controlling the job start rate. It gathers metrics from different parts of the system; to inform its decision to stop the creation of jobs.; You can find relevant configuration in the `services.LoadController` section of the `cromwell.examples.conf` file,; as well as in the `load-control` section in `reference.conf`.; The load level of the monitored sub-systems are instrumented and can be found under the `cromwell.load` statsD path.; + The statsD metrics have been re-shuffled a bit. If you had a dashboard you might find that you need to update it.; Changes include: ; + Removed artificially inserted ""count"" and ""timing"" the path; + Added a `load` section; + Metrics were prefixed twice with `cromwell` (`cromwell.cromwell.my_metric`), now they're only prefixed once; + Added `processed` and `queue` metrics under various metrics monitoring the throughput and amount of queued work respectively; + Added a memory metric representing an estimation of the free memory Cromwell thinks it has left. * Added a configuration option under `docker.hash-lookup.enabled` to disable docker hash lookup.; Disabling it will also disable call caching for jobs with floating docker tags.; ; * **Rest API** ; + Updated the `/query` response to include the total number of query results returned. See [here](http://cromwell.readthedocs.io/en/develop/api/RESTAPI/#workflowqueryresponse) for more information.; * **Language APIs** ; + The WDL library import from C",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/31:452,monitor,monitor,452,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/31,2,['monitor'],"['monitor', 'monitored']"
Energy Efficiency,"## 40 Release Notes. ### Config Changes. #### Cromwell ID in instrumentation path. When set, the configuration value of `system.cromwell_id` will be prepended to StatsD metrics. More info [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### HealthMonitor Configuration. The HealthMonitor configuration has been refactored to provide a simpler interface:; * You no longer need to specify a monitor class in your `cromwell.conf` as this will now be inherited from the `reference.conf` value.; * You can now opt-in and opt-out of any combination of status monitors.; * The PAPI backends to monitor can now be listed in a single field. ##### Upgrading. You are no longer tied to the previous preset combinations of health checks. However if you just want to carry forward; the exact same set of health checks, you can use one of the following standard recipes:. ###### From default, or `NoopHealthMonitorActor`:; If you're currently using the (default) NoopHealthMonitorActor, no action is required. ###### From `StandardHealthMonitorServiceActor`:; If you're currently using the `StandardHealthMonitorServiceActor`, replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.standard.StandardHealthMonitorServiceActor""; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; }; }; }; ``` ; ###### From `WorkbenchHealthMonitorServiceActor`:; Replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.workbench.WorkbenchHealthMonitorServiceActor"". config {; papi-backend-name = PAPIv1; papi-v2-backend-name = PAPIv2. google-auth-name = service-account; gcs-bucket-to-check = ""cromwell-ping-me-bucket""; }; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; check-gcs: true; check-papi-backends: [PAPIv1, PAPIv2]. google-auth-name = service-account",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/40:420,monitor,monitor,420,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/40,3,['monitor'],"['monitor', 'monitors']"
Energy Efficiency,"ual-private-cloud` in backend configuration. More info [here](https://cromwell.readthedocs.io/en/stable/backends/Google/). ### Call caching database refactoring. Cromwell's `CALL_CACHING_HASH_ENTRY` primary key has been refactored to use a `BIGINT` datatype in place of the previous; `INT` datatype. Cromwell will not be usable during the time the Liquibase migration for this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 100,000 `CALL_CACHING_HASH_ENTRY`; rows per second. In deployments with millions or billions of `CALL_CACHING_HASH_ENTRY` rows the migration may require ; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [documentation on localization](https://cromwell.readthedocs.io/en/stable/backends/HPC). #### Yaml node limits. Yaml parsing now checks for cycles, and limits the maximum number of parsed nodes to a configurable value. It a",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:1212,monitor,monitoring,1212,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['monitor'],['monitoring']
Integrability,"## 40 Release Notes. ### Config Changes. #### Cromwell ID in instrumentation path. When set, the configuration value of `system.cromwell_id` will be prepended to StatsD metrics. More info [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### HealthMonitor Configuration. The HealthMonitor configuration has been refactored to provide a simpler interface:; * You no longer need to specify a monitor class in your `cromwell.conf` as this will now be inherited from the `reference.conf` value.; * You can now opt-in and opt-out of any combination of status monitors.; * The PAPI backends to monitor can now be listed in a single field. ##### Upgrading. You are no longer tied to the previous preset combinations of health checks. However if you just want to carry forward; the exact same set of health checks, you can use one of the following standard recipes:. ###### From default, or `NoopHealthMonitorActor`:; If you're currently using the (default) NoopHealthMonitorActor, no action is required. ###### From `StandardHealthMonitorServiceActor`:; If you're currently using the `StandardHealthMonitorServiceActor`, replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.standard.StandardHealthMonitorServiceActor""; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; }; }; }; ``` ; ###### From `WorkbenchHealthMonitorServiceActor`:; Replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.workbench.WorkbenchHealthMonitorServiceActor"". config {; papi-backend-name = PAPIv1; papi-v2-backend-name = PAPIv2. google-auth-name = service-account; gcs-bucket-to-check = ""cromwell-ping-me-bucket""; }; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; check-gcs: true; check-papi-backends: [PAPIv1, PAPIv2]. google-auth-name = service-account",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/40:374,interface,interface,374,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/40,1,['interface'],['interface']
Modifiability," There may be a long wait period for the migration to finish for large databases.; Please refer to [MIGRATION.md](https://github.com/broadinstitute/cromwell/blob/master/MIGRATION.md) for more details.; - There are significant architectural changes related to increases in performance and scaling.; - The biggest user-facing changes from 0.19 to 0.21 are related to the application.conf file, which has been restructured significantly.; The configuration for backends now is all contained within a `backend` stanza, which specifies 1 stanza per name per backend and a default backend, as follows:. ```; backend {; default=Local; providers {; Local {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; JES {; actor-factory = ""cromwell.backend.impl.jes.JesBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; SGE {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }r; }; }; }; ```; - A new `/stats` endpoint has been added to get workflow and job count for a Cromwell running in server mode.; - Renamed Workflow Options:; “workflow_log_dir” -> “final_workflow_log_dir”; “call_logs_dir” -> “final_call_logs_dir”; “outputs_path” -> “final_workflow_outputs_dir”; “defaultRuntimeOptions” -> “default_runtime_attributes”; - Timing diagrams endpoint has been updated to include additional state information about jobs.; - Add support for Google Private IPs through `noAddress` runtime attribute. If set to true, the VM will NOT be provided with a public IP address.; _Important_: Your project must be whitelisted in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task {; command {; echo ""I'm private !""; }. runtime {; docker: ""ubuntu:latest""; noAddress: true; }; }; ```; - The Local and the SG",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:1140,config,config,1140,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,1,['config'],['config']
Modifiability," in a single field. ##### Upgrading. You are no longer tied to the previous preset combinations of health checks. However if you just want to carry forward; the exact same set of health checks, you can use one of the following standard recipes:. ###### From default, or `NoopHealthMonitorActor`:; If you're currently using the (default) NoopHealthMonitorActor, no action is required. ###### From `StandardHealthMonitorServiceActor`:; If you're currently using the `StandardHealthMonitorServiceActor`, replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.standard.StandardHealthMonitorServiceActor""; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; }; }; }; ``` ; ###### From `WorkbenchHealthMonitorServiceActor`:; Replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.workbench.WorkbenchHealthMonitorServiceActor"". config {; papi-backend-name = PAPIv1; papi-v2-backend-name = PAPIv2. google-auth-name = service-account; gcs-bucket-to-check = ""cromwell-ping-me-bucket""; }; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; check-gcs: true; check-papi-backends: [PAPIv1, PAPIv2]. google-auth-name = service-account; gcs-bucket-to-check = ""cromwell-ping-me-bucket""; }; }; }; ``` . ### Bug fixes. #### WDL 1.0 strings can contain escaped quotes. For example, the statement `String s = ""\""""` is now supported, whereas previously it produced a syntax error. #### Empty call blocks in WDL 1.0. Cromwell's WDL 1.0 implementation now allows empty call blocks, e.g. `call task_with_no_inputs {}`. This brings 1.0 in line with draft-2, which has always supported this syntax. #### Packed CWL bugfix. Fixed a bug that caused an error like `Custom type was referred to but not found` to be issued when using an imported type as a `SchemaDefRequirement` in packed CWL.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/40:1630,config,config,1630,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/40,2,['config'],['config']
Modifiability," not be usable during the time the Liquibase migration for this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 100,000 `CALL_CACHING_HASH_ENTRY`; rows per second. In deployments with millions or billions of `CALL_CACHING_HASH_ENTRY` rows the migration may require ; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [documentation on localization](https://cromwell.readthedocs.io/en/stable/backends/HPC). #### Yaml node limits. Yaml parsing now checks for cycles, and limits the maximum number of parsed nodes to a configurable value. It also; limits the nesting depth of sequences and mappings. See [the documentation on configuring; YAML](https://cromwell.readthedocs.io/en/stable/Configuring/#yaml) for more information. ### API Changes. #### Workflow Metadata. * It is now possible to use `includeKey` and `excludeKey` at the same time. If so, the ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:1542,config,configuration,1542,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['config'],['configuration']
Modifiability,"""; }; }; ```; - Changed the JES runtime attributes `defaultDisks` and `defaultZones` to be simply `disks` and `zones` respectively.; - Liquibase scripts now run automatically. Non-persistent, in-memory databases are not affected. However Cromwell will; not start if it detects evidence of manually run liquibase migrations in a persistent database. Instead, before Cromwell; will start cleanly, the database should backed up, and then this SQL should be manually executed:. ``` sql; update DATABASECHANGELOG; set MD5SUM = null,; FILENAME = substr(FILENAME, instr(FILENAME, ""src/main/migrations/"") + length(""src/main/migrations/"")); where FILENAME like '%src/main/migrations/%'; ```; - Added Preemptible VMs support for JES. This has impacts on the API Endpoint responses as a Call/Shard can now be attempted multiple times. Each attempt will have its own entry.; - Added custom thread pool to workaround Slick [deadlocks](https://github.com/slick/slick/issues/1274). The thread pool; size defaults to the Slick configuration value `db.numThreads`, but may be increased up to Slick's; `db.maxConnections`, via a new property `actionThreadPoolSize`.; - Added support for [size](https://github.com/broadinstitute/wdl/blob/develop/SPEC.md#float-sizefile-string) WDL standard library function.; - Allow for runtime attribute values to be interpreted as full expressions. For example:. ```; task example {; String ubuntu_tag; command { ... }; runtime {; docker: ""ubuntu:"" + ubuntu_tag; }; }; ```; - Add runtime attributes in Call metadata :. ```; {; ""workflowName"": ""hello"",; ""calls"": {; ""hello.hello"": [; {; ...,; ""runtimeAttributes"": {; ""preemptible"": ""0"",; ""failOnStderr"": ""false"",; ""disks"": ""local-disk 10 SSD"",; ""continueOnReturnCode"": ""0"",; ""docker"": ""ubuntu:latest"",; ""cpu"": ""1"",; ""zones"": ""us-central1-a"",; ""memory"": ""2GB""; },; ...; }; ]; }; }; ```; - Added ""preemptible"" field in Call metadata. This only appears if the backend is JES. ```; {; ""workflowName"": ""hello"",; ""calls"": {; ""hello.hello"": [",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.18:1401,config,configuration,1401,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.18,1,['config'],['configuration']
Modifiability,"# Cromwell Change Log. ## 0.21; - Warning: Significant database updates when you switch from version 0.19 to 0.21 of Cromwell.; There may be a long wait period for the migration to finish for large databases.; Please refer to [MIGRATION.md](https://github.com/broadinstitute/cromwell/blob/master/MIGRATION.md) for more details.; - There are significant architectural changes related to increases in performance and scaling.; - The biggest user-facing changes from 0.19 to 0.21 are related to the application.conf file, which has been restructured significantly.; The configuration for backends now is all contained within a `backend` stanza, which specifies 1 stanza per name per backend and a default backend, as follows:. ```; backend {; default=Local; providers {; Local {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; JES {; actor-factory = ""cromwell.backend.impl.jes.JesBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; SGE {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }r; }; }; }; ```; - A new `/stats` endpoint has been added to get workflow and job count for a Cromwell running in server mode.; - Renamed Workflow Options:; “workflow_log_dir” -> “final_workflow_log_dir”; “call_logs_dir” -> “final_call_logs_dir”; “outputs_path” -> “final_workflow_outputs_dir”; “defaultRuntimeOptions” -> “default_runtime_attributes”; - Timing diagrams endpoint has been updated to include additional state information about jobs.; - Add support for Google Private IPs through `noAddress` runtime attribute. If set to true, the VM will NOT be provided with a public IP address.; _Important_: Your project must be whitelisted in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:567,config,configuration,567,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,5,['config'],"['config', 'configuration']"
Modifiability,"## 0.21; - Warning: Significant database updates when you switch from version 0.19 to 0.21 of Cromwell.; There may be a long wait period for the migration to finish for large databases.; Please refer to [MIGRATION.md](https://github.com/broadinstitute/cromwell/blob/master/MIGRATION.md) for more details.; - There are significant architectural changes related to increases in performance and scaling.; - The biggest user-facing changes from 0.19 to 0.21 are related to the application.conf file, which has been restructured significantly.; The configuration for backends now is all contained within a `backend` stanza, which specifies 1 stanza per name per backend and a default backend, as follows:. ```; backend {; default=Local; providers {; Local {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; JES {; actor-factory = ""cromwell.backend.impl.jes.JesBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; SGE {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }r; }; }; }; ```; - A new `/stats` endpoint has been added to get workflow and job count for a Cromwell running in server mode.; - Renamed Workflow Options:; “workflow_log_dir” -> “final_workflow_log_dir”; “call_logs_dir” -> “final_call_logs_dir”; “outputs_path” -> “final_workflow_outputs_dir”; “defaultRuntimeOptions” -> “default_runtime_attributes”; - Timing diagrams endpoint has been updated to include additional state information about jobs.; - Add support for Google Private IPs through `noAddress` runtime attribute. If set to true, the VM will NOT be provided with a public IP address.; _Important_: Your project must be whitelisted in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task {; command {; echo ""I",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:1028,config,config,1028,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,1,['config'],['config']
Modifiability,"## 31 Release Notes. * **Cromwell server** ; The Cromwell server source code is now located under `server/src`. `sbt assembly` will build the runnable Cromwell JAR in ; `server/target/scala-2.12/` with a name like `cromwell-<VERSION>.jar`. * **Robustness**; + The rate at which jobs are being started can now be controlled using the `system.job-rate-control` configuration stanza. ; + A load controller service has been added to allow Cromwell to self-monitor and adjust its load accordingly.; The load controller is currently a simple on/off switch controlling the job start rate. It gathers metrics from different parts of the system; to inform its decision to stop the creation of jobs.; You can find relevant configuration in the `services.LoadController` section of the `cromwell.examples.conf` file,; as well as in the `load-control` section in `reference.conf`.; The load level of the monitored sub-systems are instrumented and can be found under the `cromwell.load` statsD path.; + The statsD metrics have been re-shuffled a bit. If you had a dashboard you might find that you need to update it.; Changes include: ; + Removed artificially inserted ""count"" and ""timing"" the path; + Added a `load` section; + Metrics were prefixed twice with `cromwell` (`cromwell.cromwell.my_metric`), now they're only prefixed once; + Added `processed` and `queue` metrics under various metrics monitoring the throughput and amount of queued work respectively; + Added a memory metric representing an estimation of the free memory Cromwell thinks it has left. * Added a configuration option under `docker.hash-lookup.enabled` to disable docker hash lookup.; Disabling it will also disable call caching for jobs with floating docker tags.; ; * **Rest API** ; + Updated the `/query` response to include the total number of query results returned. See [here](http://cromwell.readthedocs.io/en/develop/api/RESTAPI/#workflowqueryresponse) for more information.; * **Language APIs** ; + The WDL library import from C",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/31:359,config,configuration,359,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/31,2,['config'],['configuration']
Modifiability,"## 40 Release Notes. ### Config Changes. #### Cromwell ID in instrumentation path. When set, the configuration value of `system.cromwell_id` will be prepended to StatsD metrics. More info [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### HealthMonitor Configuration. The HealthMonitor configuration has been refactored to provide a simpler interface:; * You no longer need to specify a monitor class in your `cromwell.conf` as this will now be inherited from the `reference.conf` value.; * You can now opt-in and opt-out of any combination of status monitors.; * The PAPI backends to monitor can now be listed in a single field. ##### Upgrading. You are no longer tied to the previous preset combinations of health checks. However if you just want to carry forward; the exact same set of health checks, you can use one of the following standard recipes:. ###### From default, or `NoopHealthMonitorActor`:; If you're currently using the (default) NoopHealthMonitorActor, no action is required. ###### From `StandardHealthMonitorServiceActor`:; If you're currently using the `StandardHealthMonitorServiceActor`, replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.standard.StandardHealthMonitorServiceActor""; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; }; }; }; ``` ; ###### From `WorkbenchHealthMonitorServiceActor`:; Replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.workbench.WorkbenchHealthMonitorServiceActor"". config {; papi-backend-name = PAPIv1; papi-v2-backend-name = PAPIv2. google-auth-name = service-account; gcs-bucket-to-check = ""cromwell-ping-me-bucket""; }; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; check-gcs: true; check-papi-backends: [PAPIv1, PAPIv2]. google-auth-name = service-account",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/40:97,config,configuration,97,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/40,4,"['config', 'inherit', 'refactor']","['configuration', 'inherited', 'refactored']"
Modifiability,"## 43 Release Notes. ### Virtual Private Cloud with Subnetworks. Cromwell now allows PAPIV2 jobs to run on a specific subnetwork inside a private network by adding the subnetwork key ; `subnetwork-label-key` inside `virtual-private-cloud` in backend configuration. More info [here](https://cromwell.readthedocs.io/en/stable/backends/Google/). ### Call caching database refactoring. Cromwell's `CALL_CACHING_HASH_ENTRY` primary key has been refactored to use a `BIGINT` datatype in place of the previous; `INT` datatype. Cromwell will not be usable during the time the Liquibase migration for this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 100,000 `CALL_CACHING_HASH_ENTRY`; rows per second. In deployments with millions or billions of `CALL_CACHING_HASH_ENTRY` rows the migration may require ; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [doc",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:250,config,configuration,250,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,4,"['config', 'refactor']","['configuration', 'refactor', 'refactored', 'refactoring']"
Modifiability,"## 49 Release Notes. ### Changes and Warnings. #### Job store database refactoring. The primary keys of Cromwell's job store tables have been refactored to use a `BIGINT` datatype in place of the previous; `INT` datatype. Cromwell will not be usable during the time the Liquibase migration for this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 40,000 `JOB_STORE_SIMPLETON_ENTRY`; rows per second. In deployments with millions or billions of `JOB_STORE_SIMPLETON_ENTRY` rows the migration may require; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; SELECT table_rows FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'cromwell' AND table_name = 'JOB_STORE_SIMPLETON_ENTRY';; ```. #### Execution Directory Layout (cache copies). When an attempt to copy a cache result is made, you'll now see a `cacheCopy` directory in the call root directory. ; This prevents them clashing with the files staged to the same directory for attempt 1 if the cache copy fails (see also: Bug Fixes). The directory layout used to be:. ```; [...]/callRoot/; - script [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - stdout [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - output.file [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. but is now:. ```; [...]/callRoot/; - cacheCopy/; - script; - stdout; - output.file; - script [for attempt 1 if the cache copy fails]; - stdout [for attempt 1 if the cache copy fails]; - output.file [for attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. ### New Functionality. #### Disable call-caching for tasks. It is now possible to indicate in a workflow that a task should not ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:71,refactor,refactoring,71,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,3,['refactor'],"['refactor', 'refactored', 'refactoring']"
Modifiability,"## 54 Release Notes. ### Bug Fixes. * Fixed a bug where `write_json()` failed for `Array[_]` inputs. It should now work for `Boolean`, `String`, `Integer`, `Float`,; `Pair[_, _]`, `Object`, `Map[_, _]` and `Array[_]` (including array of objects) type inputs. More information on WDL Type to JSON Type ; conversion can be found [here](https://github.com/openwdl/wdl/blob/main/versions/1.0/SPEC.md#mixed-read_jsonstringfile). ### Spark backend support removal. Spark backend was not widely used and it was decided to remove it from the codebase in order to narrow the scope of Cromwell code. . ### Improved DRS Localizer logging. Error logging while localizing a DRS URI should now be more clear especially when there is a Requester Pays bucket involved. ### Per-backend hog factors; Cromwell now allows overriding system-level log factors on back-end level. First, Cromwell will try to use hog-factor ; defined in the backend config, and if it is not defined, it will default to using system-wide hog factor.; ```conf; backend {; providers {; PAPIv2 {; config {; hog-factor: 2; }; }; }; }; ```; For more information about hog factors please see [this page](https://cromwell.readthedocs.io/en/develop/cromwell_features/HogFactors/). ### `martha_v2` Support Removed. Cromwell now only supports resolving DOS or DRS URIs through [Martha](https://github.com/broadinstitute/martha)'s most; recent metadata endpoint `martha_v3`, dropping support for Martha's previous metadata endpoint `martha_v2`. To switch to; the new version of Martha's metadata endpoint, update the `martha.url` found in the [filesystems; config](https://cromwell.readthedocs.io/en/stable/filesystems/Filesystems/#overview) to point to `/martha_v3`. More; information on Martha's `martha_v3` request and response schema can be found; [here](https://github.com/broadinstitute/martha#martha-v3). ### DOS/DRS `localization_optional` Support. When running on a backend that supports `localization_optional: true` any DOS or DRS `File` value",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/54:925,config,config,925,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/54,1,['config'],['config']
Modifiability,"### External Contributors; * A special thank you to @adamstruck, @antonkulaga and @delocalizer for their contributions to Cromwell.; ### Breaking Changes. * Metadata keys for call caching are changed. All call caching keys are now in a `callCaching` stanza. `Call cache read result` has moved here and is now `result`. The `allowResultReuse` and `effectiveCallCachingMode` have moved here. The `hit` boolean is a simple indication of whether or not it was a hit, with no additional information. An example using the new format is:; ```; ""callCaching"": {; ""hit"": false,; ""effectiveCallCachingMode"": ""ReadAndWriteCache"",; ""result"": ""Cache Miss"",; ""allowResultReuse"": true; }; ```. ### Config Changes. * Added a field `insert-batch-size` to the `database` stanza which defines how many values from a batch insert will be processed at a time. This value defaults to 2000. ; * Moved the config value `services.MetadataService.metadata-summary-refresh-interval` to `services.MetadataService.config.metadata-summary-refresh-interval`; * Added ability to override the default zone(s) used by JES via the config structure by setting `genomics.default-zones` in the JES configuration; * The cromwell server TCP binding timeout is now configurable via the config key `webservice.binding-timeout`, defaulted; to the previous value `5s` (five seconds) via the reference.conf.; * For MySQL users, a massive scalability improvement via batched DB writing of internal metadata events. Note that one must add `rewriteBatchedStatements=true` to their JDBC URL in their config in order to take advantage of this. ### General Changes. * Cromwell's WDL parser now recognizes empty array literals correctly, e.g. `Array[String] emptyArray = []`.; * Cromwell now applies default labels automatically to JES pipeline runs.; * Added support for new WDL functions:; * `length: (Array[X]) => Integer` - report the length of the specified array; * `prefix: (String, Array[X]) => Array[String]` - generate an array consisting of e",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/25:882,config,config,882,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/25,2,['config'],['config']
Modifiability,", @antonkulaga and @delocalizer for their contributions to Cromwell.; ### Breaking Changes. * Metadata keys for call caching are changed. All call caching keys are now in a `callCaching` stanza. `Call cache read result` has moved here and is now `result`. The `allowResultReuse` and `effectiveCallCachingMode` have moved here. The `hit` boolean is a simple indication of whether or not it was a hit, with no additional information. An example using the new format is:; ```; ""callCaching"": {; ""hit"": false,; ""effectiveCallCachingMode"": ""ReadAndWriteCache"",; ""result"": ""Cache Miss"",; ""allowResultReuse"": true; }; ```. ### Config Changes. * Added a field `insert-batch-size` to the `database` stanza which defines how many values from a batch insert will be processed at a time. This value defaults to 2000. ; * Moved the config value `services.MetadataService.metadata-summary-refresh-interval` to `services.MetadataService.config.metadata-summary-refresh-interval`; * Added ability to override the default zone(s) used by JES via the config structure by setting `genomics.default-zones` in the JES configuration; * The cromwell server TCP binding timeout is now configurable via the config key `webservice.binding-timeout`, defaulted; to the previous value `5s` (five seconds) via the reference.conf.; * For MySQL users, a massive scalability improvement via batched DB writing of internal metadata events. Note that one must add `rewriteBatchedStatements=true` to their JDBC URL in their config in order to take advantage of this. ### General Changes. * Cromwell's WDL parser now recognizes empty array literals correctly, e.g. `Array[String] emptyArray = []`.; * Cromwell now applies default labels automatically to JES pipeline runs.; * Added support for new WDL functions:; * `length: (Array[X]) => Integer` - report the length of the specified array; * `prefix: (String, Array[X]) => Array[String]` - generate an array consisting of each element of the input array prefixed; by a specified `Strin",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/25:1096,config,config,1096,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/25,1,['config'],['config']
Modifiability,", are now converted to UTC; then formatted with exactly three digits of milliseconds. For example:; - `2017-01-19T12:34:56-04:00` will now be formatted as; - `2017-01-19T16:34:56.000Z`. This change only affects newly formatted dates. Older dates already formatted and stored by previous versions of; Cromwell will not be updated however they will still return a; [valid ISO-8601 format](https://en.wikipedia.org/wiki/ISO_8601). The older format may be in various non-UTC time zones,; and may or may not include microseconds or even nanoseconds, for example `2017-01-19T12:34:56.123456789-04:00`. ### Config Changes. #### Heartbeat failure shutdown. When a Cromwell instance is unable to write heartbeats for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend:; ```conf; # Emit a warning if jobs last longer than this amount of time. This might indicate that something got stuck.; backend {; providers {; PAPIv2 {; config { ; slow-job-warning-time: 24 hours; }; }; }; }; ```. ### Runtime Attributes. #### GPU Attributes. * The `gpuType` attribute is no lon",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:1860,config,configured,1860,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,2,['config'],"['configuration', 'configured']"
Modifiability,"-04:00`. ### Config Changes. #### Heartbeat failure shutdown. When a Cromwell instance is unable to write heartbeats for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend:; ```conf; # Emit a warning if jobs last longer than this amount of time. This might indicate that something got stuck.; backend {; providers {; PAPIv2 {; config { ; slow-job-warning-time: 24 hours; }; }; }; }; ```. ### Runtime Attributes. #### GPU Attributes. * The `gpuType` attribute is no longer validated against a whitelist at workflow submission time. Instead, validation now happens at runtime. This allows any valid accelerator to be used.; * The `nvidiaDriverVersion` attribute is now available in WDL `runtime` sections. The default continues to be `390.46` which applies if and only if GPUs are being used.; * A default `gpuType` (""nvidia-tesla-k80"") will now be applied if `gpuCount` is specified but `gpuType` is not.; * Similarly, a default `gpuCount` (1) will be applied if `gpuType` is specified but `cpuCount` is not. . ### Bug fixes. #### Better validation of work",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:2494,config,configurable,2494,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,1,['config'],['configurable']
Modifiability,"; ```; ""callCaching"": {; ""hit"": false,; ""effectiveCallCachingMode"": ""ReadAndWriteCache"",; ""result"": ""Cache Miss"",; ""allowResultReuse"": true; }; ```. ### Config Changes. * Added a field `insert-batch-size` to the `database` stanza which defines how many values from a batch insert will be processed at a time. This value defaults to 2000. ; * Moved the config value `services.MetadataService.metadata-summary-refresh-interval` to `services.MetadataService.config.metadata-summary-refresh-interval`; * Added ability to override the default zone(s) used by JES via the config structure by setting `genomics.default-zones` in the JES configuration; * The cromwell server TCP binding timeout is now configurable via the config key `webservice.binding-timeout`, defaulted; to the previous value `5s` (five seconds) via the reference.conf.; * For MySQL users, a massive scalability improvement via batched DB writing of internal metadata events. Note that one must add `rewriteBatchedStatements=true` to their JDBC URL in their config in order to take advantage of this. ### General Changes. * Cromwell's WDL parser now recognizes empty array literals correctly, e.g. `Array[String] emptyArray = []`.; * Cromwell now applies default labels automatically to JES pipeline runs.; * Added support for new WDL functions:; * `length: (Array[X]) => Integer` - report the length of the specified array; * `prefix: (String, Array[X]) => Array[String]` - generate an array consisting of each element of the input array prefixed; by a specified `String`. The input array can have elements of any primitive type, the return array will always have; type `Array[String]`.; * `defined: (Any) => Boolean` - Will return false if the provided value is an optional that is not defined. Returns true in all other cases.; * Cromwell's Config (Shared Filesystem) backend now supports invocation of commands which run in a Docker image as a non-root user.; The non-root user could either be the default user for a given Docker imag",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/25:1493,rewrite,rewriteBatchedStatements,1493,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/25,2,"['config', 'rewrite']","['config', 'rewriteBatchedStatements']"
Modifiability,"All call caching keys are now in a `callCaching` stanza. `Call cache read result` has moved here and is now `result`. The `allowResultReuse` and `effectiveCallCachingMode` have moved here. The `hit` boolean is a simple indication of whether or not it was a hit, with no additional information. An example using the new format is:; ```; ""callCaching"": {; ""hit"": false,; ""effectiveCallCachingMode"": ""ReadAndWriteCache"",; ""result"": ""Cache Miss"",; ""allowResultReuse"": true; }; ```. ### Config Changes. * Added a field `insert-batch-size` to the `database` stanza which defines how many values from a batch insert will be processed at a time. This value defaults to 2000. ; * Moved the config value `services.MetadataService.metadata-summary-refresh-interval` to `services.MetadataService.config.metadata-summary-refresh-interval`; * Added ability to override the default zone(s) used by JES via the config structure by setting `genomics.default-zones` in the JES configuration; * The cromwell server TCP binding timeout is now configurable via the config key `webservice.binding-timeout`, defaulted; to the previous value `5s` (five seconds) via the reference.conf.; * For MySQL users, a massive scalability improvement via batched DB writing of internal metadata events. Note that one must add `rewriteBatchedStatements=true` to their JDBC URL in their config in order to take advantage of this. ### General Changes. * Cromwell's WDL parser now recognizes empty array literals correctly, e.g. `Array[String] emptyArray = []`.; * Cromwell now applies default labels automatically to JES pipeline runs.; * Added support for new WDL functions:; * `length: (Array[X]) => Integer` - report the length of the specified array; * `prefix: (String, Array[X]) => Array[String]` - generate an array consisting of each element of the input array prefixed; by a specified `String`. The input array can have elements of any primitive type, the return array will always have; type `Array[String]`.; * `defined: (Any) =",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/25:1160,config,configuration,1160,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/25,3,['config'],"['config', 'configurable', 'configuration']"
Modifiability,"HING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [documentation on localization](https://cromwell.readthedocs.io/en/stable/backends/HPC). #### Yaml node limits. Yaml parsing now checks for cycles, and limits the maximum number of parsed nodes to a configurable value. It also; limits the nesting depth of sequences and mappings. See [the documentation on configuring; YAML](https://cromwell.readthedocs.io/en/stable/Configuring/#yaml) for more information. ### API Changes. #### Workflow Metadata. * It is now possible to use `includeKey` and `excludeKey` at the same time. If so, the metadata key must match the `includeKey` **and not** match the `excludeKey` to be included.; * It is now possible to use ""`calls`"" as one of your `excludeKey`s, to request that only workflow metadata gets returned. ### PostgreSQL support. Cromwell now supports PostgreSQL (version 9.6 or higher, with the Large Object; extension installed) as a database backend.; See [here](https://cromwell.readthedocs.io/en/stable/Configuring/#database) for; instructions for configuring the database connection.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:2196,config,configurable,2196,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,3,['config'],"['configurable', 'configuring']"
Modifiability,"Y`; rows per second. In deployments with millions or billions of `CALL_CACHING_HASH_ENTRY` rows the migration may require ; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [documentation on localization](https://cromwell.readthedocs.io/en/stable/backends/HPC). #### Yaml node limits. Yaml parsing now checks for cycles, and limits the maximum number of parsed nodes to a configurable value. It also; limits the nesting depth of sequences and mappings. See [the documentation on configuring; YAML](https://cromwell.readthedocs.io/en/stable/Configuring/#yaml) for more information. ### API Changes. #### Workflow Metadata. * It is now possible to use `includeKey` and `excludeKey` at the same time. If so, the metadata key must match the `includeKey` **and not** match the `excludeKey` to be included.; * It is now possible to use ""`calls`"" as one of your `excludeKey`s, to request that only workflow metadata gets retu",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:1725,config,configuration,1725,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['config'],['configuration']
Modifiability,"]` inputs. It should now work for `Boolean`, `String`, `Integer`, `Float`,; `Pair[_, _]`, `Object`, `Map[_, _]` and `Array[_]` (including array of objects) type inputs. More information on WDL Type to JSON Type ; conversion can be found [here](https://github.com/openwdl/wdl/blob/main/versions/1.0/SPEC.md#mixed-read_jsonstringfile). ### Spark backend support removal. Spark backend was not widely used and it was decided to remove it from the codebase in order to narrow the scope of Cromwell code. . ### Improved DRS Localizer logging. Error logging while localizing a DRS URI should now be more clear especially when there is a Requester Pays bucket involved. ### Per-backend hog factors; Cromwell now allows overriding system-level log factors on back-end level. First, Cromwell will try to use hog-factor ; defined in the backend config, and if it is not defined, it will default to using system-wide hog factor.; ```conf; backend {; providers {; PAPIv2 {; config {; hog-factor: 2; }; }; }; }; ```; For more information about hog factors please see [this page](https://cromwell.readthedocs.io/en/develop/cromwell_features/HogFactors/). ### `martha_v2` Support Removed. Cromwell now only supports resolving DOS or DRS URIs through [Martha](https://github.com/broadinstitute/martha)'s most; recent metadata endpoint `martha_v3`, dropping support for Martha's previous metadata endpoint `martha_v2`. To switch to; the new version of Martha's metadata endpoint, update the `martha.url` found in the [filesystems; config](https://cromwell.readthedocs.io/en/stable/filesystems/Filesystems/#overview) to point to `/martha_v3`. More; information on Martha's `martha_v3` request and response schema can be found; [here](https://github.com/broadinstitute/martha#martha-v3). ### DOS/DRS `localization_optional` Support. When running on a backend that supports `localization_optional: true` any DOS or DRS `File` values in the generated; command line will be substituted with the `gsUri` returned from Marth",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/54:1052,config,config,1052,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/54,1,['config'],['config']
Modifiability,"as decided to remove it from the codebase in order to narrow the scope of Cromwell code. . ### Improved DRS Localizer logging. Error logging while localizing a DRS URI should now be more clear especially when there is a Requester Pays bucket involved. ### Per-backend hog factors; Cromwell now allows overriding system-level log factors on back-end level. First, Cromwell will try to use hog-factor ; defined in the backend config, and if it is not defined, it will default to using system-wide hog factor.; ```conf; backend {; providers {; PAPIv2 {; config {; hog-factor: 2; }; }; }; }; ```; For more information about hog factors please see [this page](https://cromwell.readthedocs.io/en/develop/cromwell_features/HogFactors/). ### `martha_v2` Support Removed. Cromwell now only supports resolving DOS or DRS URIs through [Martha](https://github.com/broadinstitute/martha)'s most; recent metadata endpoint `martha_v3`, dropping support for Martha's previous metadata endpoint `martha_v2`. To switch to; the new version of Martha's metadata endpoint, update the `martha.url` found in the [filesystems; config](https://cromwell.readthedocs.io/en/stable/filesystems/Filesystems/#overview) to point to `/martha_v3`. More; information on Martha's `martha_v3` request and response schema can be found; [here](https://github.com/broadinstitute/martha#martha-v3). ### DOS/DRS `localization_optional` Support. When running on a backend that supports `localization_optional: true` any DOS or DRS `File` values in the generated; command line will be substituted with the `gsUri` returned from Martha's `martha_v3` endpoint. More information on; `localization_optional` can be found [here](https://cromwell.readthedocs.io/en/stable/optimizations/FileLocalization/). ### DOS/DRS metadata retrieval retried by default. Attempts to retrieve DOS/DRS metadata from Martha will be retried by default. More information can be found; [here](https://cromwell.readthedocs.io/en/stable/filesystems/Filesystems/#overview).",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/54:1604,config,config,1604,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/54,1,['config'],['config']
Modifiability,"d to specify a monitor class in your `cromwell.conf` as this will now be inherited from the `reference.conf` value.; * You can now opt-in and opt-out of any combination of status monitors.; * The PAPI backends to monitor can now be listed in a single field. ##### Upgrading. You are no longer tied to the previous preset combinations of health checks. However if you just want to carry forward; the exact same set of health checks, you can use one of the following standard recipes:. ###### From default, or `NoopHealthMonitorActor`:; If you're currently using the (default) NoopHealthMonitorActor, no action is required. ###### From `StandardHealthMonitorServiceActor`:; If you're currently using the `StandardHealthMonitorServiceActor`, replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.standard.StandardHealthMonitorServiceActor""; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; }; }; }; ``` ; ###### From `WorkbenchHealthMonitorServiceActor`:; Replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.workbench.WorkbenchHealthMonitorServiceActor"". config {; papi-backend-name = PAPIv1; papi-v2-backend-name = PAPIv2. google-auth-name = service-account; gcs-bucket-to-check = ""cromwell-ping-me-bucket""; }; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; check-gcs: true; check-papi-backends: [PAPIv1, PAPIv2]. google-auth-name = service-account; gcs-bucket-to-check = ""cromwell-ping-me-bucket""; }; }; }; ``` . ### Bug fixes. #### WDL 1.0 strings can contain escaped quotes. For example, the statement `String s = ""\""""` is now supported, whereas previously it produced a syntax error. #### Empty call blocks in WDL 1.0. Cromwell's WDL 1.0 implementation now allows empty call blocks, e.g. `call task_with_no_inputs {}`. This brings 1.0 in line with ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/40:1353,config,config,1353,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/40,1,['config'],['config']
Modifiability,"e migration to finish for large databases.; Please refer to [MIGRATION.md](https://github.com/broadinstitute/cromwell/blob/master/MIGRATION.md) for more details.; - There are significant architectural changes related to increases in performance and scaling.; - The biggest user-facing changes from 0.19 to 0.21 are related to the application.conf file, which has been restructured significantly.; The configuration for backends now is all contained within a `backend` stanza, which specifies 1 stanza per name per backend and a default backend, as follows:. ```; backend {; default=Local; providers {; Local {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; JES {; actor-factory = ""cromwell.backend.impl.jes.JesBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; SGE {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }r; }; }; }; ```; - A new `/stats` endpoint has been added to get workflow and job count for a Cromwell running in server mode.; - Renamed Workflow Options:; “workflow_log_dir” -> “final_workflow_log_dir”; “call_logs_dir” -> “final_call_logs_dir”; “outputs_path” -> “final_workflow_outputs_dir”; “defaultRuntimeOptions” -> “default_runtime_attributes”; - Timing diagrams endpoint has been updated to include additional state information about jobs.; - Add support for Google Private IPs through `noAddress` runtime attribute. If set to true, the VM will NOT be provided with a public IP address.; _Important_: Your project must be whitelisted in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task {; command {; echo ""I'm private !""; }. runtime {; docker: ""ubuntu:latest""; noAddress: true; }; }; ```; - The Local and the SGE backend have been merged into a gener",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:1171,config,config,1171,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,1,['config'],['config']
Modifiability,"imately 100,000 `CALL_CACHING_HASH_ENTRY`; rows per second. In deployments with millions or billions of `CALL_CACHING_HASH_ENTRY` rows the migration may require ; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [documentation on localization](https://cromwell.readthedocs.io/en/stable/backends/HPC). #### Yaml node limits. Yaml parsing now checks for cycles, and limits the maximum number of parsed nodes to a configurable value. It also; limits the nesting depth of sequences and mappings. See [the documentation on configuring; YAML](https://cromwell.readthedocs.io/en/stable/Configuring/#yaml) for more information. ### API Changes. #### Workflow Metadata. * It is now possible to use `includeKey` and `excludeKey` at the same time. If so, the metadata key must match the `includeKey` **and not** match the `excludeKey` to be included.; * It is now possible to use ""`calls`"" as one of your `excludeKey`s, to reques",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:1699,config,config,1699,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['config'],['config']
Modifiability,"ime zones,; and may or may not include microseconds or even nanoseconds, for example `2017-01-19T12:34:56.123456789-04:00`. ### Config Changes. #### Heartbeat failure shutdown. When a Cromwell instance is unable to write heartbeats for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend:; ```conf; # Emit a warning if jobs last longer than this amount of time. This might indicate that something got stuck.; backend {; providers {; PAPIv2 {; config { ; slow-job-warning-time: 24 hours; }; }; }; }; ```. ### Runtime Attributes. #### GPU Attributes. * The `gpuType` attribute is no longer validated against a whitelist at workflow submission time. Instead, validation now happens at runtime. This allows any valid accelerator to be used.; * The `nvidiaDriverVersion` attribute is now available in WDL `runtime` sections. The default continues to be `390.46` which applies if and only if GPUs are being used.; * A default `gpuType` (""nvidia-tesla-k80"") will now be applied if `gpuCount` is specified but `gpuType` is not.; * Similarly, a default `gpuCount` (",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:2390,config,configuration,2390,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,1,['config'],['configuration']
Modifiability,"in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task {; command {; echo ""I'm private !""; }. runtime {; docker: ""ubuntu:latest""; noAddress: true; }; }; ```; - The Local and the SGE backend have been merged into a generic; Shared File System (SFS) backend. This updated backend can be configured; to work with various other command line dispatchers such as LSF. See the; [README](README.md#sun-gridengine-backend) for more info.; - On the JES and SFS backends, task `command` blocks are now always; passed absolute paths for input `File`s.; - On the SFS backends, the call directory now contains two sub-directories:; - `inputs` contains all the input files that have been localized for this task (see next below for more details); - `execution` contains all other files (script, logs, rc, potential outputs etc...); - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc.; - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc. . For example:. ```; # use a mysql database; database {; driver = ""slick.driver.MySQLDriver$""; db {; driver = ""com.mysql.jdbc.Driver""; url = ""jdbc:mysql://host/cromwell""; user = ""user""; password = ""pass""; connectionTimeout = 5000; }; }; ```. ## 0.20; - The default per-upload bytes size for GCS is now the minumum 256K; instead of 64M. There is also an undocumented config key; `google.upload-buffer-bytes` that allows adjusting this internal value.; - Updated Docker Hub hash retriever to parse json with [custom media; types](https://github.com/docker/distribution/blob/05b0ab0/docs/spec/manifest-v2-1.md).; - Added a `/batch` submit endpoint that accepts a single wdl with; multiple input files.; - The `/query` endpoint now supports querying by `id`, and submitting; parameters as a HTTP POST.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:2929,config,configuration,2929,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,2,['config'],"['config', 'configuration']"
Modifiability,"ject must be whitelisted in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task {; command {; echo ""I'm private !""; }. runtime {; docker: ""ubuntu:latest""; noAddress: true; }; }; ```; - The Local and the SGE backend have been merged into a generic; Shared File System (SFS) backend. This updated backend can be configured; to work with various other command line dispatchers such as LSF. See the; [README](README.md#sun-gridengine-backend) for more info.; - On the JES and SFS backends, task `command` blocks are now always; passed absolute paths for input `File`s.; - On the SFS backends, the call directory now contains two sub-directories:; - `inputs` contains all the input files that have been localized for this task (see next below for more details); - `execution` contains all other files (script, logs, rc, potential outputs etc...); - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc.; - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc. . For example:. ```; # use a mysql database; database {; driver = ""slick.driver.MySQLDriver$""; db {; driver = ""com.mysql.jdbc.Driver""; url = ""jdbc:mysql://host/cromwell""; user = ""user""; password = ""pass""; connectionTimeout = 5000; }; }; ```. ## 0.20; - The default per-upload bytes size for GCS is now the minumum 256K; instead of 64M. There is also an undocumented config key; `google.upload-buffer-bytes` that allows adjusting this internal value.; - Updated Docker Hub hash retriever to parse json with [custom media; types](https://github.com/docker/distribution/blob/05b0ab0/docs/spec/manifest-v2-1.md).; - Added a `/batch` submit endpoint that accepts a single wdl with; multiple input files.; - The `/query` endpoint now supports querying by `id`, and submitting; p",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:2796,config,configuration,2796,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,1,['config'],['configuration']
Modifiability,"le Cloud SQL with SSD environment this migration runs at a rate of approximately 100,000 `CALL_CACHING_HASH_ENTRY`; rows per second. In deployments with millions or billions of `CALL_CACHING_HASH_ENTRY` rows the migration may require ; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [documentation on localization](https://cromwell.readthedocs.io/en/stable/backends/HPC). #### Yaml node limits. Yaml parsing now checks for cycles, and limits the maximum number of parsed nodes to a configurable value. It also; limits the nesting depth of sequences and mappings. See [the documentation on configuring; YAML](https://cromwell.readthedocs.io/en/stable/Configuring/#yaml) for more information. ### API Changes. #### Workflow Metadata. * It is now possible to use `includeKey` and `excludeKey` at the same time. If so, the metadata key must match the `includeKey` **and not** match the `excludeKey` to be included.; * It ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:1627,config,config,1627,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['config'],['config']
Modifiability,"n 0.19 to 0.21 of Cromwell.; There may be a long wait period for the migration to finish for large databases.; Please refer to [MIGRATION.md](https://github.com/broadinstitute/cromwell/blob/master/MIGRATION.md) for more details.; - There are significant architectural changes related to increases in performance and scaling.; - The biggest user-facing changes from 0.19 to 0.21 are related to the application.conf file, which has been restructured significantly.; The configuration for backends now is all contained within a `backend` stanza, which specifies 1 stanza per name per backend and a default backend, as follows:. ```; backend {; default=Local; providers {; Local {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; JES {; actor-factory = ""cromwell.backend.impl.jes.JesBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; SGE {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }r; }; }; }; ```; - A new `/stats` endpoint has been added to get workflow and job count for a Cromwell running in server mode.; - Renamed Workflow Options:; “workflow_log_dir” -> “final_workflow_log_dir”; “call_logs_dir” -> “final_call_logs_dir”; “outputs_path” -> “final_workflow_outputs_dir”; “defaultRuntimeOptions” -> “default_runtime_attributes”; - Timing diagrams endpoint has been updated to include additional state information about jobs.; - Add support for Google Private IPs through `noAddress` runtime attribute. If set to true, the VM will NOT be provided with a public IP address.; _Important_: Your project must be whitelisted in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task {; command {; echo ""I'm private !""; }. runtime {; docker: ""ubuntu:latest""; noAddress: true; }; }; ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:1096,config,config,1096,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,1,['config'],['config']
Modifiability,"n for this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 100,000 `CALL_CACHING_HASH_ENTRY`; rows per second. In deployments with millions or billions of `CALL_CACHING_HASH_ENTRY` rows the migration may require ; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [documentation on localization](https://cromwell.readthedocs.io/en/stable/backends/HPC). #### Yaml node limits. Yaml parsing now checks for cycles, and limits the maximum number of parsed nodes to a configurable value. It also; limits the nesting depth of sequences and mappings. See [the documentation on configuring; YAML](https://cromwell.readthedocs.io/en/stable/Configuring/#yaml) for more information. ### API Changes. #### Workflow Metadata. * It is now possible to use `includeKey` and `excludeKey` at the same time. If so, the metadata key must match the `includeKey` **and not** ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:1590,config,config,1590,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['config'],['config']
Modifiability,"ob start rate. It gathers metrics from different parts of the system; to inform its decision to stop the creation of jobs.; You can find relevant configuration in the `services.LoadController` section of the `cromwell.examples.conf` file,; as well as in the `load-control` section in `reference.conf`.; The load level of the monitored sub-systems are instrumented and can be found under the `cromwell.load` statsD path.; + The statsD metrics have been re-shuffled a bit. If you had a dashboard you might find that you need to update it.; Changes include: ; + Removed artificially inserted ""count"" and ""timing"" the path; + Added a `load` section; + Metrics were prefixed twice with `cromwell` (`cromwell.cromwell.my_metric`), now they're only prefixed once; + Added `processed` and `queue` metrics under various metrics monitoring the throughput and amount of queued work respectively; + Added a memory metric representing an estimation of the free memory Cromwell thinks it has left. * Added a configuration option under `docker.hash-lookup.enabled` to disable docker hash lookup.; Disabling it will also disable call caching for jobs with floating docker tags.; ; * **Rest API** ; + Updated the `/query` response to include the total number of query results returned. See [here](http://cromwell.readthedocs.io/en/develop/api/RESTAPI/#workflowqueryresponse) for more information.; * **Language APIs** ; + The WDL library import from Cromwell 30 has split in two and its scala packages have changed. ; + The WDL draft 2 parser is now in `cromwell-wdl-model-draft2` and its classes have moved from the `wdl4s.parser` package to `wdl.draft2.parser`.; + The WDL object model is now in `cromwell-wdl-model-draft2` and its classes have moved from the `wdl` package to `wdl.draft2.model`.; + The WDL to WOM transform functions are now in `cromwell-wdl-transforms-draft2`. The functions were removed from their object model classes and are now found in their own objects in `wdl.draft2.transforms.wdlom2wom`.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/31:1561,config,configuration,1561,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/31,1,['config'],['configuration']
Modifiability,"on. More info [here](https://cromwell.readthedocs.io/en/stable/backends/Google/). ### Call caching database refactoring. Cromwell's `CALL_CACHING_HASH_ENTRY` primary key has been refactored to use a `BIGINT` datatype in place of the previous; `INT` datatype. Cromwell will not be usable during the time the Liquibase migration for this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 100,000 `CALL_CACHING_HASH_ENTRY`; rows per second. In deployments with millions or billions of `CALL_CACHING_HASH_ENTRY` rows the migration may require ; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [documentation on localization](https://cromwell.readthedocs.io/en/stable/backends/HPC). #### Yaml node limits. Yaml parsing now checks for cycles, and limits the maximum number of parsed nodes to a configurable value. It also; limits the nesting depth of sequence",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:1256,config,configure,1256,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['config'],['configure']
Modifiability,"ow and job count for a Cromwell running in server mode.; - Renamed Workflow Options:; “workflow_log_dir” -> “final_workflow_log_dir”; “call_logs_dir” -> “final_call_logs_dir”; “outputs_path” -> “final_workflow_outputs_dir”; “defaultRuntimeOptions” -> “default_runtime_attributes”; - Timing diagrams endpoint has been updated to include additional state information about jobs.; - Add support for Google Private IPs through `noAddress` runtime attribute. If set to true, the VM will NOT be provided with a public IP address.; _Important_: Your project must be whitelisted in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task {; command {; echo ""I'm private !""; }. runtime {; docker: ""ubuntu:latest""; noAddress: true; }; }; ```; - The Local and the SGE backend have been merged into a generic; Shared File System (SFS) backend. This updated backend can be configured; to work with various other command line dispatchers such as LSF. See the; [README](README.md#sun-gridengine-backend) for more info.; - On the JES and SFS backends, task `command` blocks are now always; passed absolute paths for input `File`s.; - On the SFS backends, the call directory now contains two sub-directories:; - `inputs` contains all the input files that have been localized for this task (see next below for more details); - `execution` contains all other files (script, logs, rc, potential outputs etc...); - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc.; - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc. . For example:. ```; # use a mysql database; database {; driver = ""slick.driver.MySQLDriver$""; db {; driver = ""com.mysql.jdbc.Driver""; url = ""jdbc:mysql://host/cromwell""; user = ""user""; password = ""pass""; connectionTimeout = 50",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:2232,config,configured,2232,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,1,['config'],['configured']
Modifiability,"ready formatted and stored by previous versions of; Cromwell will not be updated however they will still return a; [valid ISO-8601 format](https://en.wikipedia.org/wiki/ISO_8601). The older format may be in various non-UTC time zones,; and may or may not include microseconds or even nanoseconds, for example `2017-01-19T12:34:56.123456789-04:00`. ### Config Changes. #### Heartbeat failure shutdown. When a Cromwell instance is unable to write heartbeats for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend:; ```conf; # Emit a warning if jobs last longer than this amount of time. This might indicate that something got stuck.; backend {; providers {; PAPIv2 {; config { ; slow-job-warning-time: 24 hours; }; }; }; }; ```. ### Runtime Attributes. #### GPU Attributes. * The `gpuType` attribute is no longer validated against a whitelist at workflow submission time. Instead, validation now happens at runtime. This allows any valid accelerator to be used.; * The `nvidiaDriverVersion` attribute is now available in WDL `runtime` sections. The default ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:2189,config,configuration,2189,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,1,['config'],['configuration']
Modifiability,"rmats. String conversions also retained whatever server time zone generated that; specific time instance. Going forward, times stored in Cromwell metadata, and later returned via the HTTP endpoint, are now converted to UTC; then formatted with exactly three digits of milliseconds. For example:; - `2017-01-19T12:34:56-04:00` will now be formatted as; - `2017-01-19T16:34:56.000Z`. This change only affects newly formatted dates. Older dates already formatted and stored by previous versions of; Cromwell will not be updated however they will still return a; [valid ISO-8601 format](https://en.wikipedia.org/wiki/ISO_8601). The older format may be in various non-UTC time zones,; and may or may not include microseconds or even nanoseconds, for example `2017-01-19T12:34:56.123456789-04:00`. ### Config Changes. #### Heartbeat failure shutdown. When a Cromwell instance is unable to write heartbeats for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend:; ```conf; # Emit a warning if jobs last longer than this amount of time. This might indicate that s",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:1693,config,configuring,1693,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,1,['config'],['configuring']
Modifiability,"s for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend:; ```conf; # Emit a warning if jobs last longer than this amount of time. This might indicate that something got stuck.; backend {; providers {; PAPIv2 {; config { ; slow-job-warning-time: 24 hours; }; }; }; }; ```. ### Runtime Attributes. #### GPU Attributes. * The `gpuType` attribute is no longer validated against a whitelist at workflow submission time. Instead, validation now happens at runtime. This allows any valid accelerator to be used.; * The `nvidiaDriverVersion` attribute is now available in WDL `runtime` sections. The default continues to be `390.46` which applies if and only if GPUs are being used.; * A default `gpuType` (""nvidia-tesla-k80"") will now be applied if `gpuCount` is specified but `gpuType` is not.; * Similarly, a default `gpuCount` (1) will be applied if `gpuType` is specified but `cpuCount` is not. . ### Bug fixes. #### Better validation of workflow heartbeats. An error will be thrown on startup when the `system.workflow-heartbeats.heartbeat-interval` is not",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:2552,config,configure,2552,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,1,['config'],['configure']
Modifiability,"ut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend:; ```conf; # Emit a warning if jobs last longer than this amount of time. This might indicate that something got stuck.; backend {; providers {; PAPIv2 {; config { ; slow-job-warning-time: 24 hours; }; }; }; }; ```. ### Runtime Attributes. #### GPU Attributes. * The `gpuType` attribute is no longer validated against a whitelist at workflow submission time. Instead, validation now happens at runtime. This allows any valid accelerator to be used.; * The `nvidiaDriverVersion` attribute is now available in WDL `runtime` sections. The default continues to be `390.46` which applies if and only if GPUs are being used.; * A default `gpuType` (""nvidia-tesla-k80"") will now be applied if `gpuCount` is specified but `gpuType` is not.; * Similarly, a default `gpuCount` (1) will be applied if `gpuType` is specified but `cpuCount` is not. . ### Bug fixes. #### Better validation of workflow heartbeats. An error will be thrown on startup when the `system.workflow-heartbeats.heartbeat-interval` is not less than the; `system.workflow-heartbeats.ttl`.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:2753,config,config,2753,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,1,['config'],['config']
Performance," been added to allow Cromwell to self-monitor and adjust its load accordingly.; The load controller is currently a simple on/off switch controlling the job start rate. It gathers metrics from different parts of the system; to inform its decision to stop the creation of jobs.; You can find relevant configuration in the `services.LoadController` section of the `cromwell.examples.conf` file,; as well as in the `load-control` section in `reference.conf`.; The load level of the monitored sub-systems are instrumented and can be found under the `cromwell.load` statsD path.; + The statsD metrics have been re-shuffled a bit. If you had a dashboard you might find that you need to update it.; Changes include: ; + Removed artificially inserted ""count"" and ""timing"" the path; + Added a `load` section; + Metrics were prefixed twice with `cromwell` (`cromwell.cromwell.my_metric`), now they're only prefixed once; + Added `processed` and `queue` metrics under various metrics monitoring the throughput and amount of queued work respectively; + Added a memory metric representing an estimation of the free memory Cromwell thinks it has left. * Added a configuration option under `docker.hash-lookup.enabled` to disable docker hash lookup.; Disabling it will also disable call caching for jobs with floating docker tags.; ; * **Rest API** ; + Updated the `/query` response to include the total number of query results returned. See [here](http://cromwell.readthedocs.io/en/develop/api/RESTAPI/#workflowqueryresponse) for more information.; * **Language APIs** ; + The WDL library import from Cromwell 30 has split in two and its scala packages have changed. ; + The WDL draft 2 parser is now in `cromwell-wdl-model-draft2` and its classes have moved from the `wdl4s.parser` package to `wdl.draft2.parser`.; + The WDL object model is now in `cromwell-wdl-model-draft2` and its classes have moved from the `wdl` package to `wdl.draft2.model`.; + The WDL to WOM transform functions are now in `cromwell-wdl-tra",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/31:1349,queue,queue,1349,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/31,3,"['queue', 'throughput']","['queue', 'queued', 'throughput']"
Performance," in this table:. ```; SELECT table_rows FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'cromwell' AND table_name = 'JOB_STORE_SIMPLETON_ENTRY';; ```. #### Execution Directory Layout (cache copies). When an attempt to copy a cache result is made, you'll now see a `cacheCopy` directory in the call root directory. ; This prevents them clashing with the files staged to the same directory for attempt 1 if the cache copy fails (see also: Bug Fixes). The directory layout used to be:. ```; [...]/callRoot/; - script [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - stdout [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - output.file [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. but is now:. ```; [...]/callRoot/; - cacheCopy/; - script; - stdout; - output.file; - script [for attempt 1 if the cache copy fails]; - stdout [for attempt 1 if the cache copy fails]; - output.file [for attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. ### New Functionality. #### Disable call-caching for tasks. It is now possible to indicate in a workflow that a task should not be call-cached. See details ; [here](https://cromwell.readthedocs.io/en/stable/optimizations/VolatileTasks). #### Delete Intermediate Outputs on PapiV2. * **Experimental:** When a new workflow option `delete_intermediate_output_files` is submitted with the workflow,; intermediate `File` objects will be deleted when the workflow completes. See the [Google Pipelines API Workflow Options; documentation](https://cromwell.readthedocs.io/en/stable/wf_options/Google#google-pipelines-api-workflow-options); for more information. #### Metadata Archival Support. Cromwell 49 now offers the option to archive metadata to GCS and remove the equivalent metadata from relational; database storage. Pleas",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:1674,cache,cache,1674,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,2,['cache'],['cache']
Performance," this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 40,000 `JOB_STORE_SIMPLETON_ENTRY`; rows per second. In deployments with millions or billions of `JOB_STORE_SIMPLETON_ENTRY` rows the migration may require; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; SELECT table_rows FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'cromwell' AND table_name = 'JOB_STORE_SIMPLETON_ENTRY';; ```. #### Execution Directory Layout (cache copies). When an attempt to copy a cache result is made, you'll now see a `cacheCopy` directory in the call root directory. ; This prevents them clashing with the files staged to the same directory for attempt 1 if the cache copy fails (see also: Bug Fixes). The directory layout used to be:. ```; [...]/callRoot/; - script [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - stdout [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - output.file [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. but is now:. ```; [...]/callRoot/; - cacheCopy/; - script; - stdout; - output.file; - script [for attempt 1 if the cache copy fails]; - stdout [for attempt 1 if the cache copy fails]; - output.file [for attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. ### New Functionality. #### Disable call-caching for tasks. It is now possible to indicate in a workflow that a task should not be call-cached. See details ; [here](https://cromwell.readthedocs.io/en/stable/optimizations/VolatileTasks). #### Delete Intermediate Outputs on PapiV2. * **Experimental:** When a new workflow option `delete_intermediate_output_files` is submitted with the workflow,; intermediate `File` obje",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:1222,cache,cache,1222,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,4,['cache'],['cache']
Performance,"# Cromwell Change Log. ## 0.21; - Warning: Significant database updates when you switch from version 0.19 to 0.21 of Cromwell.; There may be a long wait period for the migration to finish for large databases.; Please refer to [MIGRATION.md](https://github.com/broadinstitute/cromwell/blob/master/MIGRATION.md) for more details.; - There are significant architectural changes related to increases in performance and scaling.; - The biggest user-facing changes from 0.19 to 0.21 are related to the application.conf file, which has been restructured significantly.; The configuration for backends now is all contained within a `backend` stanza, which specifies 1 stanza per name per backend and a default backend, as follows:. ```; backend {; default=Local; providers {; Local {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; JES {; actor-factory = ""cromwell.backend.impl.jes.JesBackendLifecycleActorFactory""; config {; ... backend specific config ...; }; }; SGE {; actor-factory = ""cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory""; config {; ... backend specific config ...; }r; }; }; }; ```; - A new `/stats` endpoint has been added to get workflow and job count for a Cromwell running in server mode.; - Renamed Workflow Options:; “workflow_log_dir” -> “final_workflow_log_dir”; “call_logs_dir” -> “final_call_logs_dir”; “outputs_path” -> “final_workflow_outputs_dir”; “defaultRuntimeOptions” -> “default_runtime_attributes”; - Timing diagrams endpoint has been updated to include additional state information about jobs.; - Add support for Google Private IPs through `noAddress` runtime attribute. If set to true, the VM will NOT be provided with a public IP address.; _Important_: Your project must be whitelisted in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:399,perform,performance,399,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,1,['perform'],['performance']
Performance,"## 31 Release Notes. * **Cromwell server** ; The Cromwell server source code is now located under `server/src`. `sbt assembly` will build the runnable Cromwell JAR in ; `server/target/scala-2.12/` with a name like `cromwell-<VERSION>.jar`. * **Robustness**; + The rate at which jobs are being started can now be controlled using the `system.job-rate-control` configuration stanza. ; + A load controller service has been added to allow Cromwell to self-monitor and adjust its load accordingly.; The load controller is currently a simple on/off switch controlling the job start rate. It gathers metrics from different parts of the system; to inform its decision to stop the creation of jobs.; You can find relevant configuration in the `services.LoadController` section of the `cromwell.examples.conf` file,; as well as in the `load-control` section in `reference.conf`.; The load level of the monitored sub-systems are instrumented and can be found under the `cromwell.load` statsD path.; + The statsD metrics have been re-shuffled a bit. If you had a dashboard you might find that you need to update it.; Changes include: ; + Removed artificially inserted ""count"" and ""timing"" the path; + Added a `load` section; + Metrics were prefixed twice with `cromwell` (`cromwell.cromwell.my_metric`), now they're only prefixed once; + Added `processed` and `queue` metrics under various metrics monitoring the throughput and amount of queued work respectively; + Added a memory metric representing an estimation of the free memory Cromwell thinks it has left. * Added a configuration option under `docker.hash-lookup.enabled` to disable docker hash lookup.; Disabling it will also disable call caching for jobs with floating docker tags.; ; * **Rest API** ; + Updated the `/query` response to include the total number of query results returned. See [here](http://cromwell.readthedocs.io/en/develop/api/RESTAPI/#workflowqueryresponse) for more information.; * **Language APIs** ; + The WDL library import from C",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/31:387,load,load,387,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/31,6,['load'],"['load', 'load-control']"
Performance,"## 49 Release Notes. ### Changes and Warnings. #### Job store database refactoring. The primary keys of Cromwell's job store tables have been refactored to use a `BIGINT` datatype in place of the previous; `INT` datatype. Cromwell will not be usable during the time the Liquibase migration for this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 40,000 `JOB_STORE_SIMPLETON_ENTRY`; rows per second. In deployments with millions or billions of `JOB_STORE_SIMPLETON_ENTRY` rows the migration may require; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; SELECT table_rows FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'cromwell' AND table_name = 'JOB_STORE_SIMPLETON_ENTRY';; ```. #### Execution Directory Layout (cache copies). When an attempt to copy a cache result is made, you'll now see a `cacheCopy` directory in the call root directory. ; This prevents them clashing with the files staged to the same directory for attempt 1 if the cache copy fails (see also: Bug Fixes). The directory layout used to be:. ```; [...]/callRoot/; - script [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - stdout [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - output.file [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. but is now:. ```; [...]/callRoot/; - cacheCopy/; - script; - stdout; - output.file; - script [for attempt 1 if the cache copy fails]; - stdout [for attempt 1 if the cache copy fails]; - output.file [for attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. ### New Functionality. #### Disable call-caching for tasks. It is now possible to indicate in a workflow that a task should not ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:882,cache,cache,882,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,3,['cache'],"['cache', 'cacheCopy']"
Performance,"### External Contributors; * A special thank you to @adamstruck, @antonkulaga and @delocalizer for their contributions to Cromwell.; ### Breaking Changes. * Metadata keys for call caching are changed. All call caching keys are now in a `callCaching` stanza. `Call cache read result` has moved here and is now `result`. The `allowResultReuse` and `effectiveCallCachingMode` have moved here. The `hit` boolean is a simple indication of whether or not it was a hit, with no additional information. An example using the new format is:; ```; ""callCaching"": {; ""hit"": false,; ""effectiveCallCachingMode"": ""ReadAndWriteCache"",; ""result"": ""Cache Miss"",; ""allowResultReuse"": true; }; ```. ### Config Changes. * Added a field `insert-batch-size` to the `database` stanza which defines how many values from a batch insert will be processed at a time. This value defaults to 2000. ; * Moved the config value `services.MetadataService.metadata-summary-refresh-interval` to `services.MetadataService.config.metadata-summary-refresh-interval`; * Added ability to override the default zone(s) used by JES via the config structure by setting `genomics.default-zones` in the JES configuration; * The cromwell server TCP binding timeout is now configurable via the config key `webservice.binding-timeout`, defaulted; to the previous value `5s` (five seconds) via the reference.conf.; * For MySQL users, a massive scalability improvement via batched DB writing of internal metadata events. Note that one must add `rewriteBatchedStatements=true` to their JDBC URL in their config in order to take advantage of this. ### General Changes. * Cromwell's WDL parser now recognizes empty array literals correctly, e.g. `Array[String] emptyArray = []`.; * Cromwell now applies default labels automatically to JES pipeline runs.; * Added support for new WDL functions:; * `length: (Array[X]) => Integer` - report the length of the specified array; * `prefix: (String, Array[X]) => Array[String]` - generate an array consisting of e",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/25:264,cache,cache,264,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/25,1,['cache'],['cache']
Performance,"//cromwell.readthedocs.io/en/stable/optimizations/VolatileTasks). #### Delete Intermediate Outputs on PapiV2. * **Experimental:** When a new workflow option `delete_intermediate_output_files` is submitted with the workflow,; intermediate `File` objects will be deleted when the workflow completes. See the [Google Pipelines API Workflow Options; documentation](https://cromwell.readthedocs.io/en/stable/wf_options/Google#google-pipelines-api-workflow-options); for more information. #### Metadata Archival Support. Cromwell 49 now offers the option to archive metadata to GCS and remove the equivalent metadata from relational; database storage. Please see ; [the documentation](https://cromwell.readthedocs.io/en/stable/Configuring#hybrid-metadata-storage-classic-carbonite) for more details. . #### Adding support for Google Cloud Life Sciences v2beta; Cromwell now supports running workflows using Google Cloud Life Sciences v2beta API in addition to Google Cloud Genomics v2alpha1. ; More information about migration to the new API from v2alpha1 ; [here](https://cromwell.readthedocs.io/en/stable/backends/Google#migration-from-google-cloud-genomics-v2alpha1-to-google-cloud-life-sciences-v2beta). ; * **Note** Google Cloud Life Sciences is the new name for newer versions of Google Cloud Genomics.; * **Note** Support for Google Cloud Genomics v2alpha1 will be removed in a future version of Cromwell. Advance notice will be provided. ### New Docs. #### Installation methods. Links to the conda package and docker container are now available in ; [the install documentation](https://cromwell.readthedocs.io/en/stable/Getting/). ### Bug Fixes. + Fix a bug where zip files with directories could not be imported. ; For example a zip with `a.wdl` and `b.wdl` could be imported but one with `sub_workflows/a.wdl` ; and `imports/b.wdl` could not.; + Fix a bug which sometimes allowed execution scripts copied by a failed cache-copy to be run instead; of the attempt-1 script for a live job execution.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:3965,cache,cache-copy,3965,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,1,['cache'],['cache-copy']
Performance,"ala-2.12/` with a name like `cromwell-<VERSION>.jar`. * **Robustness**; + The rate at which jobs are being started can now be controlled using the `system.job-rate-control` configuration stanza. ; + A load controller service has been added to allow Cromwell to self-monitor and adjust its load accordingly.; The load controller is currently a simple on/off switch controlling the job start rate. It gathers metrics from different parts of the system; to inform its decision to stop the creation of jobs.; You can find relevant configuration in the `services.LoadController` section of the `cromwell.examples.conf` file,; as well as in the `load-control` section in `reference.conf`.; The load level of the monitored sub-systems are instrumented and can be found under the `cromwell.load` statsD path.; + The statsD metrics have been re-shuffled a bit. If you had a dashboard you might find that you need to update it.; Changes include: ; + Removed artificially inserted ""count"" and ""timing"" the path; + Added a `load` section; + Metrics were prefixed twice with `cromwell` (`cromwell.cromwell.my_metric`), now they're only prefixed once; + Added `processed` and `queue` metrics under various metrics monitoring the throughput and amount of queued work respectively; + Added a memory metric representing an estimation of the free memory Cromwell thinks it has left. * Added a configuration option under `docker.hash-lookup.enabled` to disable docker hash lookup.; Disabling it will also disable call caching for jobs with floating docker tags.; ; * **Rest API** ; + Updated the `/query` response to include the total number of query results returned. See [here](http://cromwell.readthedocs.io/en/develop/api/RESTAPI/#workflowqueryresponse) for more information.; * **Language APIs** ; + The WDL library import from Cromwell 30 has split in two and its scala packages have changed. ; + The WDL draft 2 parser is now in `cromwell-wdl-model-draft2` and its classes have moved from the `wdl4s.parser` packa",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/31:1198,load,load,1198,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/31,1,['load'],['load']
Performance,"array can have elements of any primitive type, the return array will always have; type `Array[String]`.; * `defined: (Any) => Boolean` - Will return false if the provided value is an optional that is not defined. Returns true in all other cases.; * Cromwell's Config (Shared Filesystem) backend now supports invocation of commands which run in a Docker image as a non-root user.; The non-root user could either be the default user for a given Docker image (e.g. specified in a Dockerfile via a `USER` directive),; or the Config backend could pass an optional `""-u username""` as part of the `submit-docker` command.; * In some cases the SFS backend, used for Local, SGE, etc., coerced `WdlFile` to `WdlString` by using `.toUri`. This; resulted in strings prepended with `file:///path/to/file`. Now absolute file paths will not contain the uri scheme.; * Launch jobs on servers that support the GA4GH Task Execution Schema using the TES backend.; * **Call caching: Cromwell will no longer try to use the cache for WDL tasks that contain a floating docker tag.** ; Call caching will still behave the same for tasks having a docker image with a specific hash.; See https://github.com/broadinstitute/cromwell#docker-tags for more details. ; * Added docker hash lookup. Cromwell will try to lookup the hash for a docker image with a floating tag, and use that hash when executing the job. This will be reflected in the metadata where the docker runtime attribute will contains the hash that was used. If Cromwell is unable to lookup the docker hash, the job will be run with the original user defined floating tag. Cromwell is currently able to lookup public and private docker hashes for images on Docker Hub and Google Container Engine for job running on the JES backend. For other backends, cromwell is able to lookup public docker hashes for Docker Hub and Google Container Engine. See https://github.com/broadinstitute/cromwell#docker-tags for more details. . ### Database schema changes; * Added CUST",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/25:3079,cache,cache,3079,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/25,1,['cache'],['cache']
Performance,"as decided to remove it from the codebase in order to narrow the scope of Cromwell code. . ### Improved DRS Localizer logging. Error logging while localizing a DRS URI should now be more clear especially when there is a Requester Pays bucket involved. ### Per-backend hog factors; Cromwell now allows overriding system-level log factors on back-end level. First, Cromwell will try to use hog-factor ; defined in the backend config, and if it is not defined, it will default to using system-wide hog factor.; ```conf; backend {; providers {; PAPIv2 {; config {; hog-factor: 2; }; }; }; }; ```; For more information about hog factors please see [this page](https://cromwell.readthedocs.io/en/develop/cromwell_features/HogFactors/). ### `martha_v2` Support Removed. Cromwell now only supports resolving DOS or DRS URIs through [Martha](https://github.com/broadinstitute/martha)'s most; recent metadata endpoint `martha_v3`, dropping support for Martha's previous metadata endpoint `martha_v2`. To switch to; the new version of Martha's metadata endpoint, update the `martha.url` found in the [filesystems; config](https://cromwell.readthedocs.io/en/stable/filesystems/Filesystems/#overview) to point to `/martha_v3`. More; information on Martha's `martha_v3` request and response schema can be found; [here](https://github.com/broadinstitute/martha#martha-v3). ### DOS/DRS `localization_optional` Support. When running on a backend that supports `localization_optional: true` any DOS or DRS `File` values in the generated; command line will be substituted with the `gsUri` returned from Martha's `martha_v3` endpoint. More information on; `localization_optional` can be found [here](https://cromwell.readthedocs.io/en/stable/optimizations/FileLocalization/). ### DOS/DRS metadata retrieval retried by default. Attempts to retrieve DOS/DRS metadata from Martha will be retried by default. More information can be found; [here](https://cromwell.readthedocs.io/en/stable/filesystems/Filesystems/#overview).",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/54:2223,optimiz,optimizations,2223,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/54,1,['optimiz'],['optimizations']
Performance,"ase plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; SELECT table_rows FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'cromwell' AND table_name = 'JOB_STORE_SIMPLETON_ENTRY';; ```. #### Execution Directory Layout (cache copies). When an attempt to copy a cache result is made, you'll now see a `cacheCopy` directory in the call root directory. ; This prevents them clashing with the files staged to the same directory for attempt 1 if the cache copy fails (see also: Bug Fixes). The directory layout used to be:. ```; [...]/callRoot/; - script [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - stdout [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - output.file [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. but is now:. ```; [...]/callRoot/; - cacheCopy/; - script; - stdout; - output.file; - script [for attempt 1 if the cache copy fails]; - stdout [for attempt 1 if the cache copy fails]; - output.file [for attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. ### New Functionality. #### Disable call-caching for tasks. It is now possible to indicate in a workflow that a task should not be call-cached. See details ; [here](https://cromwell.readthedocs.io/en/stable/optimizations/VolatileTasks). #### Delete Intermediate Outputs on PapiV2. * **Experimental:** When a new workflow option `delete_intermediate_output_files` is submitted with the workflow,; intermediate `File` objects will be deleted when the workflow completes. See the [Google Pipelines API Workflow Options; documentation](https://cromwell.readthedocs.io/en/stable/wf_options/Google#google-pipelines-api-workflow-options); for more information. #### Metadata Archival Support. Cromwell 49 now offers the option to archive metad",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:1596,cache,cacheCopy,1596,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,1,['cache'],['cacheCopy']
Performance,"directory in the call root directory. ; This prevents them clashing with the files staged to the same directory for attempt 1 if the cache copy fails (see also: Bug Fixes). The directory layout used to be:. ```; [...]/callRoot/; - script [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - stdout [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - output.file [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. but is now:. ```; [...]/callRoot/; - cacheCopy/; - script; - stdout; - output.file; - script [for attempt 1 if the cache copy fails]; - stdout [for attempt 1 if the cache copy fails]; - output.file [for attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. ### New Functionality. #### Disable call-caching for tasks. It is now possible to indicate in a workflow that a task should not be call-cached. See details ; [here](https://cromwell.readthedocs.io/en/stable/optimizations/VolatileTasks). #### Delete Intermediate Outputs on PapiV2. * **Experimental:** When a new workflow option `delete_intermediate_output_files` is submitted with the workflow,; intermediate `File` objects will be deleted when the workflow completes. See the [Google Pipelines API Workflow Options; documentation](https://cromwell.readthedocs.io/en/stable/wf_options/Google#google-pipelines-api-workflow-options); for more information. #### Metadata Archival Support. Cromwell 49 now offers the option to archive metadata to GCS and remove the equivalent metadata from relational; database storage. Please see ; [the documentation](https://cromwell.readthedocs.io/en/stable/Configuring#hybrid-metadata-storage-classic-carbonite) for more details. . #### Adding support for Google Cloud Life Sciences v2beta; Cromwell now supports running workflows using Google Cloud Life Sciences v2",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:2009,cache,cached,2009,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,1,['cache'],['cached']
Performance,"e migration may require ; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [documentation on localization](https://cromwell.readthedocs.io/en/stable/backends/HPC). #### Yaml node limits. Yaml parsing now checks for cycles, and limits the maximum number of parsed nodes to a configurable value. It also; limits the nesting depth of sequences and mappings. See [the documentation on configuring; YAML](https://cromwell.readthedocs.io/en/stable/Configuring/#yaml) for more information. ### API Changes. #### Workflow Metadata. * It is now possible to use `includeKey` and `excludeKey` at the same time. If so, the metadata key must match the `includeKey` **and not** match the `excludeKey` to be included.; * It is now possible to use ""`calls`"" as one of your `excludeKey`s, to request that only workflow metadata gets returned. ### PostgreSQL support. Cromwell now supports PostgreSQL (version 9.6 or higher, with the La",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:1837,cache,cached-copy,1837,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['cache'],['cached-copy']
Performance,"lease plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [documentation on localization](https://cromwell.readthedocs.io/en/stable/backends/HPC). #### Yaml node limits. Yaml parsing now checks for cycles, and limits the maximum number of parsed nodes to a configurable value. It also; limits the nesting depth of sequences and mappings. See [the documentation on configuring; YAML](https://cromwell.readthedocs.io/en/stable/Configuring/#yaml) for more information. ### API Changes. #### Workflow Metadata. * It is now possible to use `includeKey` and `excludeKey` at the same time. If so, the metadata key must match the `includeKey` **and not** match the `excludeKey` to be included.; * It is now possible to use ""`calls`"" as one of your `excludeKey`s, to request that only workflow metadata gets returned. ### PostgreSQL support. Cromwell now supports PostgreSQL (version 9.6 or higher, with the Large Object; extension installed) as a database backend.; See [h",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:1883,cache,cached-copy,1883,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['cache'],['cached-copy']
Performance,"loyments with millions or billions of `JOB_STORE_SIMPLETON_ENTRY` rows the migration may require; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; SELECT table_rows FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'cromwell' AND table_name = 'JOB_STORE_SIMPLETON_ENTRY';; ```. #### Execution Directory Layout (cache copies). When an attempt to copy a cache result is made, you'll now see a `cacheCopy` directory in the call root directory. ; This prevents them clashing with the files staged to the same directory for attempt 1 if the cache copy fails (see also: Bug Fixes). The directory layout used to be:. ```; [...]/callRoot/; - script [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - stdout [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - output.file [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. but is now:. ```; [...]/callRoot/; - cacheCopy/; - script; - stdout; - output.file; - script [for attempt 1 if the cache copy fails]; - stdout [for attempt 1 if the cache copy fails]; - output.file [for attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. ### New Functionality. #### Disable call-caching for tasks. It is now possible to indicate in a workflow that a task should not be call-cached. See details ; [here](https://cromwell.readthedocs.io/en/stable/optimizations/VolatileTasks). #### Delete Intermediate Outputs on PapiV2. * **Experimental:** When a new workflow option `delete_intermediate_output_files` is submitted with the workflow,; intermediate `File` objects will be deleted when the workflow completes. See the [Google Pipelines API Workflow Options; documentation](https://cromwell.readthedocs.io/en/stable/wf_options/Google#google-",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:1411,cache,cache,1411,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,2,['cache'],['cache']
Performance,"mple indication of whether or not it was a hit, with no additional information. An example using the new format is:; ```; ""callCaching"": {; ""hit"": false,; ""effectiveCallCachingMode"": ""ReadAndWriteCache"",; ""result"": ""Cache Miss"",; ""allowResultReuse"": true; }; ```. ### Config Changes. * Added a field `insert-batch-size` to the `database` stanza which defines how many values from a batch insert will be processed at a time. This value defaults to 2000. ; * Moved the config value `services.MetadataService.metadata-summary-refresh-interval` to `services.MetadataService.config.metadata-summary-refresh-interval`; * Added ability to override the default zone(s) used by JES via the config structure by setting `genomics.default-zones` in the JES configuration; * The cromwell server TCP binding timeout is now configurable via the config key `webservice.binding-timeout`, defaulted; to the previous value `5s` (five seconds) via the reference.conf.; * For MySQL users, a massive scalability improvement via batched DB writing of internal metadata events. Note that one must add `rewriteBatchedStatements=true` to their JDBC URL in their config in order to take advantage of this. ### General Changes. * Cromwell's WDL parser now recognizes empty array literals correctly, e.g. `Array[String] emptyArray = []`.; * Cromwell now applies default labels automatically to JES pipeline runs.; * Added support for new WDL functions:; * `length: (Array[X]) => Integer` - report the length of the specified array; * `prefix: (String, Array[X]) => Array[String]` - generate an array consisting of each element of the input array prefixed; by a specified `String`. The input array can have elements of any primitive type, the return array will always have; type `Array[String]`.; * `defined: (Any) => Boolean` - Will return false if the provided value is an optional that is not defined. Returns true in all other cases.; * Cromwell's Config (Shared Filesystem) backend now supports invocation of commands which r",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/25:1393,scalab,scalability,1393,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/25,1,['scalab'],['scalability']
Performance,"name = 'JOB_STORE_SIMPLETON_ENTRY';; ```. #### Execution Directory Layout (cache copies). When an attempt to copy a cache result is made, you'll now see a `cacheCopy` directory in the call root directory. ; This prevents them clashing with the files staged to the same directory for attempt 1 if the cache copy fails (see also: Bug Fixes). The directory layout used to be:. ```; [...]/callRoot/; - script [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - stdout [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - output.file [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. but is now:. ```; [...]/callRoot/; - cacheCopy/; - script; - stdout; - output.file; - script [for attempt 1 if the cache copy fails]; - stdout [for attempt 1 if the cache copy fails]; - output.file [for attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. ### New Functionality. #### Disable call-caching for tasks. It is now possible to indicate in a workflow that a task should not be call-cached. See details ; [here](https://cromwell.readthedocs.io/en/stable/optimizations/VolatileTasks). #### Delete Intermediate Outputs on PapiV2. * **Experimental:** When a new workflow option `delete_intermediate_output_files` is submitted with the workflow,; intermediate `File` objects will be deleted when the workflow completes. See the [Google Pipelines API Workflow Options; documentation](https://cromwell.readthedocs.io/en/stable/wf_options/Google#google-pipelines-api-workflow-options); for more information. #### Metadata Archival Support. Cromwell 49 now offers the option to archive metadata to GCS and remove the equivalent metadata from relational; database storage. Please see ; [the documentation](https://cromwell.readthedocs.io/en/stable/Configuring#hybrid-metadata-storage-classi",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:1779,cache,cache,1779,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,1,['cache'],['cache']
Performance,"r attempt 1 if the cache copy fails (see also: Bug Fixes). The directory layout used to be:. ```; [...]/callRoot/; - script [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - stdout [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - output.file [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. but is now:. ```; [...]/callRoot/; - cacheCopy/; - script; - stdout; - output.file; - script [for attempt 1 if the cache copy fails]; - stdout [for attempt 1 if the cache copy fails]; - output.file [for attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. ### New Functionality. #### Disable call-caching for tasks. It is now possible to indicate in a workflow that a task should not be call-cached. See details ; [here](https://cromwell.readthedocs.io/en/stable/optimizations/VolatileTasks). #### Delete Intermediate Outputs on PapiV2. * **Experimental:** When a new workflow option `delete_intermediate_output_files` is submitted with the workflow,; intermediate `File` objects will be deleted when the workflow completes. See the [Google Pipelines API Workflow Options; documentation](https://cromwell.readthedocs.io/en/stable/wf_options/Google#google-pipelines-api-workflow-options); for more information. #### Metadata Archival Support. Cromwell 49 now offers the option to archive metadata to GCS and remove the equivalent metadata from relational; database storage. Please see ; [the documentation](https://cromwell.readthedocs.io/en/stable/Configuring#hybrid-metadata-storage-classic-carbonite) for more details. . #### Adding support for Google Cloud Life Sciences v2beta; Cromwell now supports running workflows using Google Cloud Life Sciences v2beta API in addition to Google Cloud Genomics v2alpha1. ; More information about migration to the new API from v2a",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:2080,optimiz,optimizations,2080,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,1,['optimiz'],['optimizations']
Performance,"ring. The primary keys of Cromwell's job store tables have been refactored to use a `BIGINT` datatype in place of the previous; `INT` datatype. Cromwell will not be usable during the time the Liquibase migration for this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 40,000 `JOB_STORE_SIMPLETON_ENTRY`; rows per second. In deployments with millions or billions of `JOB_STORE_SIMPLETON_ENTRY` rows the migration may require; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; SELECT table_rows FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'cromwell' AND table_name = 'JOB_STORE_SIMPLETON_ENTRY';; ```. #### Execution Directory Layout (cache copies). When an attempt to copy a cache result is made, you'll now see a `cacheCopy` directory in the call root directory. ; This prevents them clashing with the files staged to the same directory for attempt 1 if the cache copy fails (see also: Bug Fixes). The directory layout used to be:. ```; [...]/callRoot/; - script [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - stdout [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - output.file [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. but is now:. ```; [...]/callRoot/; - cacheCopy/; - script; - stdout; - output.file; - script [for attempt 1 if the cache copy fails]; - stdout [for attempt 1 if the cache copy fails]; - output.file [for attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. ### New Functionality. #### Disable call-caching for tasks. It is now possible to indicate in a workflow that a task should not be call-cached. See details ; [here](https://cromwell.readthedocs.io/en/stable",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:1107,cache,cache,1107,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,1,['cache'],['cache']
Safety,"- The deprecated parse, validate, inputs and highlight functionality from the command line tool has been removed in favor of wdltool (https://github.com/broadinstitute/wdltool); - Workflow options can now include a `defaultRuntimeOptions` section, so that the same runtime attribute is not needed in every single WDL task. E.g.:. ```; {; ""defaultRuntimeOptions"": {; ""docker"": ""ubuntu:latest""; }; }; ```; - Changed the JES runtime attributes `defaultDisks` and `defaultZones` to be simply `disks` and `zones` respectively.; - Liquibase scripts now run automatically. Non-persistent, in-memory databases are not affected. However Cromwell will; not start if it detects evidence of manually run liquibase migrations in a persistent database. Instead, before Cromwell; will start cleanly, the database should backed up, and then this SQL should be manually executed:. ``` sql; update DATABASECHANGELOG; set MD5SUM = null,; FILENAME = substr(FILENAME, instr(FILENAME, ""src/main/migrations/"") + length(""src/main/migrations/"")); where FILENAME like '%src/main/migrations/%'; ```; - Added Preemptible VMs support for JES. This has impacts on the API Endpoint responses as a Call/Shard can now be attempted multiple times. Each attempt will have its own entry.; - Added custom thread pool to workaround Slick [deadlocks](https://github.com/slick/slick/issues/1274). The thread pool; size defaults to the Slick configuration value `db.numThreads`, but may be increased up to Slick's; `db.maxConnections`, via a new property `actionThreadPoolSize`.; - Added support for [size](https://github.com/broadinstitute/wdl/blob/develop/SPEC.md#float-sizefile-string) WDL standard library function.; - Allow for runtime attribute values to be interpreted as full expressions. For example:. ```; task example {; String ubuntu_tag; command { ... }; runtime {; docker: ""ubuntu:"" + ubuntu_tag; }; }; ```; - Add runtime attributes in Call metadata :. ```; {; ""workflowName"": ""hello"",; ""calls"": {; ""hello.hello"": [; {; ...,; ""r",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.18:659,detect,detects,659,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.18,1,['detect'],['detects']
Safety,"All call caching keys are now in a `callCaching` stanza. `Call cache read result` has moved here and is now `result`. The `allowResultReuse` and `effectiveCallCachingMode` have moved here. The `hit` boolean is a simple indication of whether or not it was a hit, with no additional information. An example using the new format is:; ```; ""callCaching"": {; ""hit"": false,; ""effectiveCallCachingMode"": ""ReadAndWriteCache"",; ""result"": ""Cache Miss"",; ""allowResultReuse"": true; }; ```. ### Config Changes. * Added a field `insert-batch-size` to the `database` stanza which defines how many values from a batch insert will be processed at a time. This value defaults to 2000. ; * Moved the config value `services.MetadataService.metadata-summary-refresh-interval` to `services.MetadataService.config.metadata-summary-refresh-interval`; * Added ability to override the default zone(s) used by JES via the config structure by setting `genomics.default-zones` in the JES configuration; * The cromwell server TCP binding timeout is now configurable via the config key `webservice.binding-timeout`, defaulted; to the previous value `5s` (five seconds) via the reference.conf.; * For MySQL users, a massive scalability improvement via batched DB writing of internal metadata events. Note that one must add `rewriteBatchedStatements=true` to their JDBC URL in their config in order to take advantage of this. ### General Changes. * Cromwell's WDL parser now recognizes empty array literals correctly, e.g. `Array[String] emptyArray = []`.; * Cromwell now applies default labels automatically to JES pipeline runs.; * Added support for new WDL functions:; * `length: (Array[X]) => Integer` - report the length of the specified array; * `prefix: (String, Array[X]) => Array[String]` - generate an array consisting of each element of the input array prefixed; by a specified `String`. The input array can have elements of any primitive type, the return array will always have; type `Array[String]`.; * `defined: (Any) =",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/25:1209,timeout,timeout,1209,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/25,1,['timeout'],['timeout']
Safety,"sult`. The `allowResultReuse` and `effectiveCallCachingMode` have moved here. The `hit` boolean is a simple indication of whether or not it was a hit, with no additional information. An example using the new format is:; ```; ""callCaching"": {; ""hit"": false,; ""effectiveCallCachingMode"": ""ReadAndWriteCache"",; ""result"": ""Cache Miss"",; ""allowResultReuse"": true; }; ```. ### Config Changes. * Added a field `insert-batch-size` to the `database` stanza which defines how many values from a batch insert will be processed at a time. This value defaults to 2000. ; * Moved the config value `services.MetadataService.metadata-summary-refresh-interval` to `services.MetadataService.config.metadata-summary-refresh-interval`; * Added ability to override the default zone(s) used by JES via the config structure by setting `genomics.default-zones` in the JES configuration; * The cromwell server TCP binding timeout is now configurable via the config key `webservice.binding-timeout`, defaulted; to the previous value `5s` (five seconds) via the reference.conf.; * For MySQL users, a massive scalability improvement via batched DB writing of internal metadata events. Note that one must add `rewriteBatchedStatements=true` to their JDBC URL in their config in order to take advantage of this. ### General Changes. * Cromwell's WDL parser now recognizes empty array literals correctly, e.g. `Array[String] emptyArray = []`.; * Cromwell now applies default labels automatically to JES pipeline runs.; * Added support for new WDL functions:; * `length: (Array[X]) => Integer` - report the length of the specified array; * `prefix: (String, Array[X]) => Array[String]` - generate an array consisting of each element of the input array prefixed; by a specified `String`. The input array can have elements of any primitive type, the return array will always have; type `Array[String]`.; * `defined: (Any) => Boolean` - Will return false if the provided value is an optional that is not defined. Returns true in all oth",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/25:1276,timeout,timeout,1276,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/25,1,['timeout'],['timeout']
Security,"- The deprecated parse, validate, inputs and highlight functionality from the command line tool has been removed in favor of wdltool (https://github.com/broadinstitute/wdltool); - Workflow options can now include a `defaultRuntimeOptions` section, so that the same runtime attribute is not needed in every single WDL task. E.g.:. ```; {; ""defaultRuntimeOptions"": {; ""docker"": ""ubuntu:latest""; }; }; ```; - Changed the JES runtime attributes `defaultDisks` and `defaultZones` to be simply `disks` and `zones` respectively.; - Liquibase scripts now run automatically. Non-persistent, in-memory databases are not affected. However Cromwell will; not start if it detects evidence of manually run liquibase migrations in a persistent database. Instead, before Cromwell; will start cleanly, the database should backed up, and then this SQL should be manually executed:. ``` sql; update DATABASECHANGELOG; set MD5SUM = null,; FILENAME = substr(FILENAME, instr(FILENAME, ""src/main/migrations/"") + length(""src/main/migrations/"")); where FILENAME like '%src/main/migrations/%'; ```; - Added Preemptible VMs support for JES. This has impacts on the API Endpoint responses as a Call/Shard can now be attempted multiple times. Each attempt will have its own entry.; - Added custom thread pool to workaround Slick [deadlocks](https://github.com/slick/slick/issues/1274). The thread pool; size defaults to the Slick configuration value `db.numThreads`, but may be increased up to Slick's; `db.maxConnections`, via a new property `actionThreadPoolSize`.; - Added support for [size](https://github.com/broadinstitute/wdl/blob/develop/SPEC.md#float-sizefile-string) WDL standard library function.; - Allow for runtime attribute values to be interpreted as full expressions. For example:. ```; task example {; String ubuntu_tag; command { ... }; runtime {; docker: ""ubuntu:"" + ubuntu_tag; }; }; ```; - Add runtime attributes in Call metadata :. ```; {; ""workflowName"": ""hello"",; ""calls"": {; ""hello.hello"": [; {; ...,; ""r",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.18:24,validat,validate,24,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.18,1,['validat'],['validate']
Security,"in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task {; command {; echo ""I'm private !""; }. runtime {; docker: ""ubuntu:latest""; noAddress: true; }; }; ```; - The Local and the SGE backend have been merged into a generic; Shared File System (SFS) backend. This updated backend can be configured; to work with various other command line dispatchers such as LSF. See the; [README](README.md#sun-gridengine-backend) for more info.; - On the JES and SFS backends, task `command` blocks are now always; passed absolute paths for input `File`s.; - On the SFS backends, the call directory now contains two sub-directories:; - `inputs` contains all the input files that have been localized for this task (see next below for more details); - `execution` contains all other files (script, logs, rc, potential outputs etc...); - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc.; - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc. . For example:. ```; # use a mysql database; database {; driver = ""slick.driver.MySQLDriver$""; db {; driver = ""com.mysql.jdbc.Driver""; url = ""jdbc:mysql://host/cromwell""; user = ""user""; password = ""pass""; connectionTimeout = 5000; }; }; ```. ## 0.20; - The default per-upload bytes size for GCS is now the minumum 256K; instead of 64M. There is also an undocumented config key; `google.upload-buffer-bytes` that allows adjusting this internal value.; - Updated Docker Hub hash retriever to parse json with [custom media; types](https://github.com/docker/distribution/blob/05b0ab0/docs/spec/manifest-v2-1.md).; - Added a `/batch` submit endpoint that accepts a single wdl with; multiple input files.; - The `/query` endpoint now supports querying by `id`, and submitting; parameters as a HTTP POST.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:3215,password,password,3215,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,2,"['hash', 'password']","['hash', 'password']"
Security,"ob start rate. It gathers metrics from different parts of the system; to inform its decision to stop the creation of jobs.; You can find relevant configuration in the `services.LoadController` section of the `cromwell.examples.conf` file,; as well as in the `load-control` section in `reference.conf`.; The load level of the monitored sub-systems are instrumented and can be found under the `cromwell.load` statsD path.; + The statsD metrics have been re-shuffled a bit. If you had a dashboard you might find that you need to update it.; Changes include: ; + Removed artificially inserted ""count"" and ""timing"" the path; + Added a `load` section; + Metrics were prefixed twice with `cromwell` (`cromwell.cromwell.my_metric`), now they're only prefixed once; + Added `processed` and `queue` metrics under various metrics monitoring the throughput and amount of queued work respectively; + Added a memory metric representing an estimation of the free memory Cromwell thinks it has left. * Added a configuration option under `docker.hash-lookup.enabled` to disable docker hash lookup.; Disabling it will also disable call caching for jobs with floating docker tags.; ; * **Rest API** ; + Updated the `/query` response to include the total number of query results returned. See [here](http://cromwell.readthedocs.io/en/develop/api/RESTAPI/#workflowqueryresponse) for more information.; * **Language APIs** ; + The WDL library import from Cromwell 30 has split in two and its scala packages have changed. ; + The WDL draft 2 parser is now in `cromwell-wdl-model-draft2` and its classes have moved from the `wdl4s.parser` package to `wdl.draft2.parser`.; + The WDL object model is now in `cromwell-wdl-model-draft2` and its classes have moved from the `wdl` package to `wdl.draft2.model`.; + The WDL to WOM transform functions are now in `cromwell-wdl-transforms-draft2`. The functions were removed from their object model classes and are now found in their own objects in `wdl.draft2.transforms.wdlom2wom`.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/31:1596,hash,hash-lookup,1596,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/31,2,['hash'],"['hash', 'hash-lookup']"
Security,"ut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must also be explicitly; set less than the `ttl`. #### nVidia Driver Attribute Change. The runtime attribute `nvidia-driver-version` was previously allowed only as a default runtime attribute in configuration.; Because WDL does not allow attribute names to contain `-` characters, this has been changed to `nvidiaDriverVersion`.; This field is now accepted within WDL files as well as within the configuration file. #### Logging long running jobs. All backends can now emit slow job warnings after a configurable time running. ; NB This example shows how to configure this setting for the PAPIv2 backend:; ```conf; # Emit a warning if jobs last longer than this amount of time. This might indicate that something got stuck.; backend {; providers {; PAPIv2 {; config { ; slow-job-warning-time: 24 hours; }; }; }; }; ```. ### Runtime Attributes. #### GPU Attributes. * The `gpuType` attribute is no longer validated against a whitelist at workflow submission time. Instead, validation now happens at runtime. This allows any valid accelerator to be used.; * The `nvidiaDriverVersion` attribute is now available in WDL `runtime` sections. The default continues to be `390.46` which applies if and only if GPUs are being used.; * A default `gpuType` (""nvidia-tesla-k80"") will now be applied if `gpuCount` is specified but `gpuType` is not.; * Similarly, a default `gpuCount` (1) will be applied if `gpuType` is specified but `cpuCount` is not. . ### Bug fixes. #### Better validation of workflow heartbeats. An error will be thrown on startup when the `system.workflow-heartbeats.heartbeat-interval` is not less than the; `system.workflow-heartbeats.ttl`.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:2898,validat,validated,2898,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,3,['validat'],"['validated', 'validation']"
Security,"ve; type `Array[String]`.; * `defined: (Any) => Boolean` - Will return false if the provided value is an optional that is not defined. Returns true in all other cases.; * Cromwell's Config (Shared Filesystem) backend now supports invocation of commands which run in a Docker image as a non-root user.; The non-root user could either be the default user for a given Docker image (e.g. specified in a Dockerfile via a `USER` directive),; or the Config backend could pass an optional `""-u username""` as part of the `submit-docker` command.; * In some cases the SFS backend, used for Local, SGE, etc., coerced `WdlFile` to `WdlString` by using `.toUri`. This; resulted in strings prepended with `file:///path/to/file`. Now absolute file paths will not contain the uri scheme.; * Launch jobs on servers that support the GA4GH Task Execution Schema using the TES backend.; * **Call caching: Cromwell will no longer try to use the cache for WDL tasks that contain a floating docker tag.** ; Call caching will still behave the same for tasks having a docker image with a specific hash.; See https://github.com/broadinstitute/cromwell#docker-tags for more details. ; * Added docker hash lookup. Cromwell will try to lookup the hash for a docker image with a floating tag, and use that hash when executing the job. This will be reflected in the metadata where the docker runtime attribute will contains the hash that was used. If Cromwell is unable to lookup the docker hash, the job will be run with the original user defined floating tag. Cromwell is currently able to lookup public and private docker hashes for images on Docker Hub and Google Container Engine for job running on the JES backend. For other backends, cromwell is able to lookup public docker hashes for Docker Hub and Google Container Engine. See https://github.com/broadinstitute/cromwell#docker-tags for more details. . ### Database schema changes; * Added CUSTOM_LABELS as a field of WORKFLOW_STORE_ENTRY, to store workflow store entries.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/25:3227,hash,hash,3227,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/25,8,['hash'],"['hash', 'hashes']"
Testability,"## 54 Release Notes. ### Bug Fixes. * Fixed a bug where `write_json()` failed for `Array[_]` inputs. It should now work for `Boolean`, `String`, `Integer`, `Float`,; `Pair[_, _]`, `Object`, `Map[_, _]` and `Array[_]` (including array of objects) type inputs. More information on WDL Type to JSON Type ; conversion can be found [here](https://github.com/openwdl/wdl/blob/main/versions/1.0/SPEC.md#mixed-read_jsonstringfile). ### Spark backend support removal. Spark backend was not widely used and it was decided to remove it from the codebase in order to narrow the scope of Cromwell code. . ### Improved DRS Localizer logging. Error logging while localizing a DRS URI should now be more clear especially when there is a Requester Pays bucket involved. ### Per-backend hog factors; Cromwell now allows overriding system-level log factors on back-end level. First, Cromwell will try to use hog-factor ; defined in the backend config, and if it is not defined, it will default to using system-wide hog factor.; ```conf; backend {; providers {; PAPIv2 {; config {; hog-factor: 2; }; }; }; }; ```; For more information about hog factors please see [this page](https://cromwell.readthedocs.io/en/develop/cromwell_features/HogFactors/). ### `martha_v2` Support Removed. Cromwell now only supports resolving DOS or DRS URIs through [Martha](https://github.com/broadinstitute/martha)'s most; recent metadata endpoint `martha_v3`, dropping support for Martha's previous metadata endpoint `martha_v2`. To switch to; the new version of Martha's metadata endpoint, update the `martha.url` found in the [filesystems; config](https://cromwell.readthedocs.io/en/stable/filesystems/Filesystems/#overview) to point to `/martha_v3`. More; information on Martha's `martha_v3` request and response schema can be found; [here](https://github.com/broadinstitute/martha#martha-v3). ### DOS/DRS `localization_optional` Support. When running on a backend that supports `localization_optional: true` any DOS or DRS `File` value",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/54:619,log,logging,619,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/54,3,['log'],"['log', 'logging']"
Testability,"out jobs.; - Add support for Google Private IPs through `noAddress` runtime attribute. If set to true, the VM will NOT be provided with a public IP address.; _Important_: Your project must be whitelisted in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task {; command {; echo ""I'm private !""; }. runtime {; docker: ""ubuntu:latest""; noAddress: true; }; }; ```; - The Local and the SGE backend have been merged into a generic; Shared File System (SFS) backend. This updated backend can be configured; to work with various other command line dispatchers such as LSF. See the; [README](README.md#sun-gridengine-backend) for more info.; - On the JES and SFS backends, task `command` blocks are now always; passed absolute paths for input `File`s.; - On the SFS backends, the call directory now contains two sub-directories:; - `inputs` contains all the input files that have been localized for this task (see next below for more details); - `execution` contains all other files (script, logs, rc, potential outputs etc...); - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc.; - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc. . For example:. ```; # use a mysql database; database {; driver = ""slick.driver.MySQLDriver$""; db {; driver = ""com.mysql.jdbc.Driver""; url = ""jdbc:mysql://host/cromwell""; user = ""user""; password = ""pass""; connectionTimeout = 5000; }; }; ```. ## 0.20; - The default per-upload bytes size for GCS is now the minumum 256K; instead of 64M. There is also an undocumented config key; `google.upload-buffer-bytes` that allows adjusting this internal value.; - Updated Docker Hub hash retriever to parse json with [custom media; types](https://github.com/docker/distribution/blob/05b0ab0/docs/spec/mani",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:2727,log,logs,2727,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,1,['log'],['logs']
Usability,"## 31 Release Notes. * **Cromwell server** ; The Cromwell server source code is now located under `server/src`. `sbt assembly` will build the runnable Cromwell JAR in ; `server/target/scala-2.12/` with a name like `cromwell-<VERSION>.jar`. * **Robustness**; + The rate at which jobs are being started can now be controlled using the `system.job-rate-control` configuration stanza. ; + A load controller service has been added to allow Cromwell to self-monitor and adjust its load accordingly.; The load controller is currently a simple on/off switch controlling the job start rate. It gathers metrics from different parts of the system; to inform its decision to stop the creation of jobs.; You can find relevant configuration in the `services.LoadController` section of the `cromwell.examples.conf` file,; as well as in the `load-control` section in `reference.conf`.; The load level of the monitored sub-systems are instrumented and can be found under the `cromwell.load` statsD path.; + The statsD metrics have been re-shuffled a bit. If you had a dashboard you might find that you need to update it.; Changes include: ; + Removed artificially inserted ""count"" and ""timing"" the path; + Added a `load` section; + Metrics were prefixed twice with `cromwell` (`cromwell.cromwell.my_metric`), now they're only prefixed once; + Added `processed` and `queue` metrics under various metrics monitoring the throughput and amount of queued work respectively; + Added a memory metric representing an estimation of the free memory Cromwell thinks it has left. * Added a configuration option under `docker.hash-lookup.enabled` to disable docker hash lookup.; Disabling it will also disable call caching for jobs with floating docker tags.; ; * **Rest API** ; + Updated the `/query` response to include the total number of query results returned. See [here](http://cromwell.readthedocs.io/en/develop/api/RESTAPI/#workflowqueryresponse) for more information.; * **Language APIs** ; + The WDL library import from C",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/31:529,simpl,simple,529,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/31,1,['simpl'],['simple']
Usability,"## 40 Release Notes. ### Config Changes. #### Cromwell ID in instrumentation path. When set, the configuration value of `system.cromwell_id` will be prepended to StatsD metrics. More info [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### HealthMonitor Configuration. The HealthMonitor configuration has been refactored to provide a simpler interface:; * You no longer need to specify a monitor class in your `cromwell.conf` as this will now be inherited from the `reference.conf` value.; * You can now opt-in and opt-out of any combination of status monitors.; * The PAPI backends to monitor can now be listed in a single field. ##### Upgrading. You are no longer tied to the previous preset combinations of health checks. However if you just want to carry forward; the exact same set of health checks, you can use one of the following standard recipes:. ###### From default, or `NoopHealthMonitorActor`:; If you're currently using the (default) NoopHealthMonitorActor, no action is required. ###### From `StandardHealthMonitorServiceActor`:; If you're currently using the `StandardHealthMonitorServiceActor`, replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.standard.StandardHealthMonitorServiceActor""; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; }; }; }; ``` ; ###### From `WorkbenchHealthMonitorServiceActor`:; Replace this stanza:; ```; services {; HealthMonitor {; class = ""cromwell.services.healthmonitor.impl.workbench.WorkbenchHealthMonitorServiceActor"". config {; papi-backend-name = PAPIv1; papi-v2-backend-name = PAPIv2. google-auth-name = service-account; gcs-bucket-to-check = ""cromwell-ping-me-bucket""; }; }; }; ``` ; With this one:; ```; services {; HealthMonitor {; config {; check-dockerhub: true; check-engine-database: true; check-gcs: true; check-papi-backends: [PAPIv1, PAPIv2]. google-auth-name = service-account",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/40:366,simpl,simpler,366,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/40,1,['simpl'],['simpler']
Usability,"## 41 Release Notes. ### Workflow Options. * It is now possible to supply custom `google-labels` in [workflow options](https://cromwell.readthedocs.io/en/stable/wf_options/Google/). ### AWS backend. It is now possible to use WDL disk attributes with the following formats on AWS.; ```; disks: ""local-disk 20 SSD""; ```; ```; disks: ""/some/mnt 20 SSD""; ```; Because Cromwell's AWS backend auto-sizes disks, the size specification is simply discarded. ### Time Formatting. In previous versions of Cromwell, times were converted to strings using; [the default Java formatter](https://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html#toString--) which; generates a variety of ISO-8601 formats. String conversions also retained whatever server time zone generated that; specific time instance. Going forward, times stored in Cromwell metadata, and later returned via the HTTP endpoint, are now converted to UTC; then formatted with exactly three digits of milliseconds. For example:; - `2017-01-19T12:34:56-04:00` will now be formatted as; - `2017-01-19T16:34:56.000Z`. This change only affects newly formatted dates. Older dates already formatted and stored by previous versions of; Cromwell will not be updated however they will still return a; [valid ISO-8601 format](https://en.wikipedia.org/wiki/ISO_8601). The older format may be in various non-UTC time zones,; and may or may not include microseconds or even nanoseconds, for example `2017-01-19T12:34:56.123456789-04:00`. ### Config Changes. #### Heartbeat failure shutdown. When a Cromwell instance is unable to write heartbeats for some period of time it will automatically shut down. For more; information see the docs on [configuring Workflow Hearbeats](https://cromwell.readthedocs.io/en/stable/Configuring/). NOTE: In the remote chance that the `system.workflow-heartbeats.ttl` has been configured to be less than `5 minutes`; then the new configuration value `system.workflow-heartbeats.write-failure-shutdown-duration` must al",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/41:431,simpl,simply,431,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/41,1,['simpl'],['simply']
Usability,"## 43 Release Notes. ### Virtual Private Cloud with Subnetworks. Cromwell now allows PAPIV2 jobs to run on a specific subnetwork inside a private network by adding the subnetwork key ; `subnetwork-label-key` inside `virtual-private-cloud` in backend configuration. More info [here](https://cromwell.readthedocs.io/en/stable/backends/Google/). ### Call caching database refactoring. Cromwell's `CALL_CACHING_HASH_ENTRY` primary key has been refactored to use a `BIGINT` datatype in place of the previous; `INT` datatype. Cromwell will not be usable during the time the Liquibase migration for this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 100,000 `CALL_CACHING_HASH_ENTRY`; rows per second. In deployments with millions or billions of `CALL_CACHING_HASH_ENTRY` rows the migration may require ; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; select max(CALL_CACHING_HASH_ENTRY_ID) from CALL_CACHING_HASH_ENTRY; ```. ### Stackdriver Instrumentation. Cromwell now supports sending metrics to [Google's Stackdriver API](https://cloud.google.com/monitoring/api/v3/). ; Learn more on how to configure [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). ### BigQuery in PAPI. Cromwell now allows a user to specify BigQuery jobs when using the PAPIv2 backend. ### Configuration Changes. #### StatsD Instrumentation. There is a small change in StatsD's configuration path. Originally, the path to the config was `services.Instrumentation.config.statsd`; which now has been updated to `services.Instrumentation.config`. More info on its configuration can be found; [here](https://cromwell.readthedocs.io/en/stable/developers/Instrumentation/). #### cached-copy. A new experimental feature, the `cached-copy` localization strategy is available for the shared filesystem. ; More information can be found in the [doc",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/43:541,usab,usable,541,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/43,1,['usab'],['usable']
Usability,"## 49 Release Notes. ### Changes and Warnings. #### Job store database refactoring. The primary keys of Cromwell's job store tables have been refactored to use a `BIGINT` datatype in place of the previous; `INT` datatype. Cromwell will not be usable during the time the Liquibase migration for this refactor is running.; In the Google Cloud SQL with SSD environment this migration runs at a rate of approximately 40,000 `JOB_STORE_SIMPLETON_ENTRY`; rows per second. In deployments with millions or billions of `JOB_STORE_SIMPLETON_ENTRY` rows the migration may require; a significant amount of downtime so please plan accordingly. The following SQL could be used to estimate the number of; rows in this table:. ```; SELECT table_rows FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'cromwell' AND table_name = 'JOB_STORE_SIMPLETON_ENTRY';; ```. #### Execution Directory Layout (cache copies). When an attempt to copy a cache result is made, you'll now see a `cacheCopy` directory in the call root directory. ; This prevents them clashing with the files staged to the same directory for attempt 1 if the cache copy fails (see also: Bug Fixes). The directory layout used to be:. ```; [...]/callRoot/; - script [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - stdout [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - output.file [from the cache copy attempt, or for execution attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. but is now:. ```; [...]/callRoot/; - cacheCopy/; - script; - stdout; - output.file; - script [for attempt 1 if the cache copy fails]; - stdout [for attempt 1 if the cache copy fails]; - output.file [for attempt 1 if the cache copy fails]; - attempt-2/ [if attempt 1 fails]; - script; - stdout; - output.file; ```. ### New Functionality. #### Disable call-caching for tasks. It is now possible to indicate in a workflow that a task should not ",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/49:243,usab,usable,243,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/49,1,['usab'],['usable']
Usability,"## 54 Release Notes. ### Bug Fixes. * Fixed a bug where `write_json()` failed for `Array[_]` inputs. It should now work for `Boolean`, `String`, `Integer`, `Float`,; `Pair[_, _]`, `Object`, `Map[_, _]` and `Array[_]` (including array of objects) type inputs. More information on WDL Type to JSON Type ; conversion can be found [here](https://github.com/openwdl/wdl/blob/main/versions/1.0/SPEC.md#mixed-read_jsonstringfile). ### Spark backend support removal. Spark backend was not widely used and it was decided to remove it from the codebase in order to narrow the scope of Cromwell code. . ### Improved DRS Localizer logging. Error logging while localizing a DRS URI should now be more clear especially when there is a Requester Pays bucket involved. ### Per-backend hog factors; Cromwell now allows overriding system-level log factors on back-end level. First, Cromwell will try to use hog-factor ; defined in the backend config, and if it is not defined, it will default to using system-wide hog factor.; ```conf; backend {; providers {; PAPIv2 {; config {; hog-factor: 2; }; }; }; }; ```; For more information about hog factors please see [this page](https://cromwell.readthedocs.io/en/develop/cromwell_features/HogFactors/). ### `martha_v2` Support Removed. Cromwell now only supports resolving DOS or DRS URIs through [Martha](https://github.com/broadinstitute/martha)'s most; recent metadata endpoint `martha_v3`, dropping support for Martha's previous metadata endpoint `martha_v2`. To switch to; the new version of Martha's metadata endpoint, update the `martha.url` found in the [filesystems; config](https://cromwell.readthedocs.io/en/stable/filesystems/Filesystems/#overview) to point to `/martha_v3`. More; information on Martha's `martha_v3` request and response schema can be found; [here](https://github.com/broadinstitute/martha#martha-v3). ### DOS/DRS `localization_optional` Support. When running on a backend that supports `localization_optional: true` any DOS or DRS `File` value",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/54:688,clear,clear,688,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/54,1,['clear'],['clear']
Usability,"### External Contributors; * A special thank you to @adamstruck, @antonkulaga and @delocalizer for their contributions to Cromwell.; ### Breaking Changes. * Metadata keys for call caching are changed. All call caching keys are now in a `callCaching` stanza. `Call cache read result` has moved here and is now `result`. The `allowResultReuse` and `effectiveCallCachingMode` have moved here. The `hit` boolean is a simple indication of whether or not it was a hit, with no additional information. An example using the new format is:; ```; ""callCaching"": {; ""hit"": false,; ""effectiveCallCachingMode"": ""ReadAndWriteCache"",; ""result"": ""Cache Miss"",; ""allowResultReuse"": true; }; ```. ### Config Changes. * Added a field `insert-batch-size` to the `database` stanza which defines how many values from a batch insert will be processed at a time. This value defaults to 2000. ; * Moved the config value `services.MetadataService.metadata-summary-refresh-interval` to `services.MetadataService.config.metadata-summary-refresh-interval`; * Added ability to override the default zone(s) used by JES via the config structure by setting `genomics.default-zones` in the JES configuration; * The cromwell server TCP binding timeout is now configurable via the config key `webservice.binding-timeout`, defaulted; to the previous value `5s` (five seconds) via the reference.conf.; * For MySQL users, a massive scalability improvement via batched DB writing of internal metadata events. Note that one must add `rewriteBatchedStatements=true` to their JDBC URL in their config in order to take advantage of this. ### General Changes. * Cromwell's WDL parser now recognizes empty array literals correctly, e.g. `Array[String] emptyArray = []`.; * Cromwell now applies default labels automatically to JES pipeline runs.; * Added support for new WDL functions:; * `length: (Array[X]) => Integer` - report the length of the specified array; * `prefix: (String, Array[X]) => Array[String]` - generate an array consisting of e",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/25:413,simpl,simple,413,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/25,1,['simpl'],['simple']
Usability,"- The deprecated parse, validate, inputs and highlight functionality from the command line tool has been removed in favor of wdltool (https://github.com/broadinstitute/wdltool); - Workflow options can now include a `defaultRuntimeOptions` section, so that the same runtime attribute is not needed in every single WDL task. E.g.:. ```; {; ""defaultRuntimeOptions"": {; ""docker"": ""ubuntu:latest""; }; }; ```; - Changed the JES runtime attributes `defaultDisks` and `defaultZones` to be simply `disks` and `zones` respectively.; - Liquibase scripts now run automatically. Non-persistent, in-memory databases are not affected. However Cromwell will; not start if it detects evidence of manually run liquibase migrations in a persistent database. Instead, before Cromwell; will start cleanly, the database should backed up, and then this SQL should be manually executed:. ``` sql; update DATABASECHANGELOG; set MD5SUM = null,; FILENAME = substr(FILENAME, instr(FILENAME, ""src/main/migrations/"") + length(""src/main/migrations/"")); where FILENAME like '%src/main/migrations/%'; ```; - Added Preemptible VMs support for JES. This has impacts on the API Endpoint responses as a Call/Shard can now be attempted multiple times. Each attempt will have its own entry.; - Added custom thread pool to workaround Slick [deadlocks](https://github.com/slick/slick/issues/1274). The thread pool; size defaults to the Slick configuration value `db.numThreads`, but may be increased up to Slick's; `db.maxConnections`, via a new property `actionThreadPoolSize`.; - Added support for [size](https://github.com/broadinstitute/wdl/blob/develop/SPEC.md#float-sizefile-string) WDL standard library function.; - Allow for runtime attribute values to be interpreted as full expressions. For example:. ```; task example {; String ubuntu_tag; command { ... }; runtime {; docker: ""ubuntu:"" + ubuntu_tag; }; }; ```; - Add runtime attributes in Call metadata :. ```; {; ""workflowName"": ""hello"",; ""calls"": {; ""hello.hello"": [; {; ...,; ""r",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.18:481,simpl,simply,481,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.18,1,['simpl'],['simply']
Usability,"in ""Google Access for Private IPs Early Access Program"". If it's not whitelisted and you set this attribute to true, the task will hang.; Defaults to `false`.; e.g:. ```; task {; command {; echo ""I'm private !""; }. runtime {; docker: ""ubuntu:latest""; noAddress: true; }; }; ```; - The Local and the SGE backend have been merged into a generic; Shared File System (SFS) backend. This updated backend can be configured; to work with various other command line dispatchers such as LSF. See the; [README](README.md#sun-gridengine-backend) for more info.; - On the JES and SFS backends, task `command` blocks are now always; passed absolute paths for input `File`s.; - On the SFS backends, the call directory now contains two sub-directories:; - `inputs` contains all the input files that have been localized for this task (see next below for more details); - `execution` contains all other files (script, logs, rc, potential outputs etc...); - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc.; - Override the default database configuration by setting the keys; `database.driver`, `database.db.driver`, `database.db.url`, etc. . For example:. ```; # use a mysql database; database {; driver = ""slick.driver.MySQLDriver$""; db {; driver = ""com.mysql.jdbc.Driver""; url = ""jdbc:mysql://host/cromwell""; user = ""user""; password = ""pass""; connectionTimeout = 5000; }; }; ```. ## 0.20; - The default per-upload bytes size for GCS is now the minumum 256K; instead of 64M. There is also an undocumented config key; `google.upload-buffer-bytes` that allows adjusting this internal value.; - Updated Docker Hub hash retriever to parse json with [custom media; types](https://github.com/docker/distribution/blob/05b0ab0/docs/spec/manifest-v2-1.md).; - Added a `/batch` submit endpoint that accepts a single wdl with; multiple input files.; - The `/query` endpoint now supports querying by `id`, and submitting; parameters as a HTTP POST.",MatchSource.RELEASES,broadinstitute,cromwell,87,https://github.com/broadinstitute/cromwell/releases/tag/0.21:3382,undo,undocumented,3382,https://cromwell.readthedocs.io/en/latest/,https://github.com/broadinstitute/cromwell/releases/tag/0.21,1,['undo'],['undocumented']
